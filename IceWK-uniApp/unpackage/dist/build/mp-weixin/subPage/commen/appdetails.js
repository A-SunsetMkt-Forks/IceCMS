require('../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["subPage/commen/appdetails"],{"0b3f":function(o,n,e){"use strict";e.r(n);var t=e("90ab"),s=e.n(t);for(var u in t)"default"!==u&&function(o){e.d(n,o,(function(){return t[o]}))}(u);n["default"]=s.a},6484:function(o,n,e){"use strict";(function(o){e("c6ef");t(e("66fd"));var n=t(e("e6c7"));function t(o){return o&&o.__esModule?o:{default:o}}wx.__webpack_require_UNI_MP_PLUGIN__=e,o(n.default)}).call(this,e("543d")["createPage"])},"90ab":function(o,n,e){"use strict";(function(o){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t=s(e("a8d7"));function s(o){return o&&o.__esModule?o:{default:o}}var u=function(){Promise.all([e.e("subPage/common/vendor"),e.e("subPage/commen/cmder-MDParserHighlight/index")]).then(function(){return resolve(e("b74a"))}.bind(null,e)).catch(e.oe)},l={data:function(){return{showdown:!1,sleep:0,downloadTask:null,downUrls:"",show:!1,topBar:"one",cid:"",name:"",postlunbo:"",thumb:"",title:"",tag:[],down:"",time:"",content:"",showshare:"",commentsNum:"0",comments:[],commentText:"",showCmt:!1,yonghuming:"",qqnumber:"",nameimg:"",downurl:"",freedownurl:"",showlist:""}},components:{MDParserHighlight:u},onLoad:function(o){this.topMenu(),this.id=o.id,this.name=o.name,this.getCategoriesList(),this.getComments()},onPullDownRefresh:function(){this.getCategoriesList(),setTimeout((function(){o.showToast({title:"刷新成功"}),o.stopPullDownRefresh()}),1e3)},onPageScroll:function(o){var n=this;o.scrollTop>120?n.topBar="tow":n.topBar="one"},methods:{downss:function(){var n=this,e=o.getStorageSync("Token");console.log(e),null!==e&&""!==e?o.request({url:"http://易如意后台域名/api.php?act=get_info&app=10000&token="+e,method:"GET",data:{},success:function(t){console.log(t.data.msg.vip);var s=new Date;if(t.data.msg.vip-s>0){n.showdown=!0;var u=n.downurl;-1!=u.indexOf("lanzou")?o.request({url:"http://蓝奏云解析域名/lanzou.php?url="+n.downurl,method:"GET",success:function(o){n.downUrls=o.data.download,n.downapk()}}):-1!=u.indexOf(".apk")?(n.showdown=!0,n.downUrls=n.downurl,n.downapk()):o.showToast({title:"不支持此链接下载方式！！"})}else if("999999999"==t.data.msg.vip){n.showdown=!0;u=n.downurl;-1!=u.indexOf("lanzou")?o.request({url:"http://蓝奏云解析域名/lanzou.php?url="+n.downurl,method:"GET",success:function(o){n.downUrls=o.data.download,n.downapk()}}):-1!=u.indexOf(".apk")?(n.showdown=!0,n.downUrls=n.downurl,n.downapk()):o.showToast({title:"不支持此链接下载方式！！"})}else o.request({url:"http://易如意后台域名/api.php?act=get_fen&app=10000&token="+e+"&fid=4",method:"GET",data:{},success:function(e){if(console.log(e.data),"200"==e.data.code){o.showToast({title:"扣除10积分，开始下载！",icon:"none"}),n.showdown=!0;var t=n.downurl;-1!=t.indexOf("lanzou")?o.request({url:"http://蓝奏云解析域名/lanzou.php?url="+n.downurl,method:"GET",success:function(o){n.downUrls=o.data.download,console.log(n.downUrls),n.downapk()}}):-1!=t.indexOf(".apk")?(n.showdown=!0,n.downUrls=n.downurl,console.log(n.downUrls),n.downapk()):o.showToast({title:"不支持此链接下载方式！！"})}else o.showToast({title:"积分不足",icon:"error"}),o.showModal({title:"友情提示",content:"您积分不足，是否前去购买积分？或者购买会员即可免积分下载？",success:function(n){n.confirm?(console.log("用户点击确定"),o.switchTab({url:"../my/vip/shop"})):n.cancel&&console.log("用户点击取消")}})}})}}):o.showModal({title:"友情提示",content:"您未登录软件，登录后即可享受软件下载功能，是否前去登录？",success:function(n){n.confirm?(console.log("用户点击确定"),o.navigateTo({url:"../my/account/login"})):n.cancel&&console.log("用户点击取消")}})},downapk:function(){var n=this;this.downloadTask=o.downloadFile({url:this.downUrls,success:function(e){console.log(e),200==e.statusCode&&o.showModal({title:"",content:"下载完成，确定现在安装吗？",confirmText:"安装",confirmColor:"#EE8F57",success:function(o){o.confirm&&(console.log("开始安装"),plus.runtime.install(e.tempFilePath,{},(function(o){console.log(o,"**************************"),n.$emit("updateSucc"),plus.runtime.restart()}),(function(o){console.log(o),n.$emit("updateErro")})))}})},fail:function(o){console.log(o)}}),this.downloadTask.onProgressUpdate((function(o){n.sleep=o.progress,100==o.progress&&(n.showdown=!1,n.$emit("downOver"))}))},getCategoriesList:function(){var n=this,e=this.id;console.log(t.default.GetPostsbyID(e)),o.request({url:t.default.GetPostsbyID(e),success:function(o){console.log(o);var e=o.data;n.title=e.title,n.content=e.content,n.thumb=e.thumb,n.postlunbo=e.postlunbo[0].str_value,n.time=e.year+"年"+e.month+"月"+e.day+"日",n.name=e.name.screenName,n.down=e.views[0].views,n.commentsNum=e.commentsNum,n.freedownurl=e.freedownurl[0].str_value,n.downurl=e.downurl[0].str_value,n.description=e.description[0].str_value,n.tag=e.tag,n.commentsNum=e.commentsNum,n.showshare=e.showshare,console.log(n.commentsNum)}})},topMenu:function(){var n=this;o.getSystemInfo({success:function(o){n.BarHeight=o.statusBarHeight}})},radioClick:function(n){console.log(n),o.navigateTo({url:"/subPage/commen/commenlist?name="+n})},getComments:function(){var n=this;o.request({url:t.default.GetPostsCommentbyCID(n.cid),success:function(o){var e=o.data.data;"undefined"!=typeof e&&"none"!=e&&"NULL"!=e?(n.showlist=!0,n.comments=o.data.data,console.log(n.comments)):n.showlist=!1}})},downs:function(){var n=this,e=o.getStorageSync("Token");null!==e&&""!==e?o.request({url:"http://易如意后台域名/api.php?act=get_info&app=10000&token="+e,method:"GET",data:{},success:function(e){if("999999999"==e.data.msg.vip){var t=n.downurl;-1!=t.indexOf("lanzou")?o.request({url:"http://114.115.164.207/lanzou.php?url="+n.downurl,method:"GET",data:{},success:function(o){n.downUrls=o.data.download,n.show=!0}}):(n.downUrls=n.downurl,console.log(n.downUrls),n.show=!0)}else{var s=new Date,u=new Date(1e3*e.data.msg.vip),l=u-s;if(l>0){t=n.downurl;-1!=t.indexOf("lanzou")?o.request({url:"http://114.115.164.207/lanzou.php?url="+n.downurl,method:"GET",data:{},success:function(o){n.downUrls=o.data.download,n.show=!0}}):-1!=t.indexOf(".apk")?(n.downUrls=n.downurl,n.show=!0):o.showToast({title:"不支持此链接下载方式！！"})}}},fail:function(){},complete:function(){}}):o.showModal({title:"未登录账号",content:"您没有登录账号，暂时不能使用软件功能，是否去登陆？",success:function(n){n.confirm?(console.log("用户点击确定"),o.navigateTo({url:"../my/account/login"})):n.cancel&&console.log("用户点击取消")}})},nodown:function(){o.showToast({title:"暂无此资源",icon:"none"})},showInp:function(){this.showCmt=!this.showCmt},closes:function(){this.showCmt=!this.showCmt},addComment:function(){var n=this,e=n.qqnumber,s=(n.yonghuming,n.commentText);""==e?o.showToast({icon:"none",title:"请填写QQ"}):o.request({url:"https://api.linhun.vip/api/NicknameAvatar?qq="+e,success:function(e){n.nameimg=e.data.imgurl,n.yonghuming=e.data.name,console.log(n.nameimg),""==s?o.showToast({icon:"none",title:"总得写些什么吧"}):o.request({url:t.default.Postcomment(n.cid,n.yonghuming,s,n.nameimg),success:function(e){console.log(e.data),n.getComments(n.cid),n.commentText="",o.showToast({title:"评论需要审核才可以显示",icon:"none"})}})}})},fabulous:function(){plus.runtime.openURL(this.freedownurl)},formatDate:function(o){o=new Date(parseInt(1e3*o));var n=o.getFullYear(),e=("0"+(o.getMonth()+1)).slice(-2),t=("0"+o.getDate()).slice(-2),s=(("0"+o.getHours()).slice(-2),("0"+o.getMinutes()).slice(-2),n+"-"+e+"-"+t);return s},close:function(){console.log("关闭弹窗"),this.show=!1},updateSucc:function(){console.log("监听安装成功")},updateErro:function(){console.log("监听安装失败")},downOver:function(){console.log("监听文件下载成功")},maskClick:function(){console.log("遮罩层呗点击"),this.show=!1}}};n.default=l}).call(this,e("543d")["default"])},"9d22":function(o,n,e){},"9db0":function(o,n,e){"use strict";e.d(n,"b",(function(){return s})),e.d(n,"c",(function(){return u})),e.d(n,"a",(function(){return t}));var t={uIcon:function(){return Promise.all([e.e("common/vendor"),e.e("uni_modules/uview-ui/components/u-icon/u-icon")]).then(e.bind(null,"1b47"))},uCellGroup:function(){return Promise.all([e.e("common/vendor"),e.e("uni_modules/uview-ui/components/u-cell-group/u-cell-group")]).then(e.bind(null,"eff9"))},uCell:function(){return Promise.all([e.e("common/vendor"),e.e("uni_modules/uview-ui/components/u-cell/u-cell")]).then(e.bind(null,"e75b"))},uScrollList:function(){return Promise.all([e.e("common/vendor"),e.e("uni_modules/uview-ui/components/u-scroll-list/u-scroll-list")]).then(e.bind(null,"c377"))},uTag:function(){return Promise.all([e.e("common/vendor"),e.e("uni_modules/uview-ui/components/u-tag/u-tag")]).then(e.bind(null,"9071"))},uEmpty:function(){return Promise.all([e.e("common/vendor"),e.e("uni_modules/uview-ui/components/u-empty/u-empty")]).then(e.bind(null,"f3af"))},uLineProgress:function(){return Promise.all([e.e("common/vendor"),e.e("uni_modules/uview-ui/components/u-line-progress/u-line-progress")]).then(e.bind(null,"9b66"))},uNoNetwork:function(){return Promise.all([e.e("common/vendor"),e.e("uni_modules/uview-ui/components/u-no-network/u-no-network")]).then(e.bind(null,"4858"))}},s=function(){var o=this,n=o.$createElement,e=(o._self._c,o.showlist?o.__map(o.comments,(function(n,e){var t=o.__get_orig(n),s=o.formatDate(n.created);return{$orig:t,m0:s}})):null);o.$mp.data=Object.assign({},{$root:{l0:e}})},u=[]},a35b:function(o,n,e){"use strict";var t=e("9d22"),s=e.n(t);s.a},e6c7:function(o,n,e){"use strict";e.r(n);var t=e("9db0"),s=e("0b3f");for(var u in s)"default"!==u&&function(o){e.d(n,o,(function(){return s[o]}))}(u);e("a35b");var l,i=e("f0c5"),a=Object(i["a"])(s["default"],t["b"],t["c"],!1,null,null,null,!1,t["a"],l);n["default"]=a.exports}},[["6484","common/runtime","common/vendor"]]]);