import{p as it,u as Ht,_ as Dt,a as Ke,E as Bt,q as Ye}from"./CWE-KJV6.js";import{_ as le,s as he,h as Ot,E as Ze}from"./g0zu4MNc.js";import{d as F,ak as zt,H as ie,I as fe,c as v,o as u,M as ae,p as W,u as $,n as Re,i as Qt,r as h,m as Pe,g as L,b,a as e,F as Z,f as ee,ah as Vt,_ as at,V as et,k as rt,ad as Wt,E as Gt,C as Jt,s as Xt,B as pe,w as tt,D as st,l as Kt,q as Y,t as T,e as R,h as ot,v as Ae,x as Me}from"./C_uFub58.js";import{E as Yt}from"./DlWFjbbA.js";import"./BpqunBSk.js";import{E as k}from"./B1mjav-x.js";import{u as ne}from"./CJdOkxoU.js";import{h as Zt}from"./DFZ1BoYC.js";import{u as Ue,c as ct,d as es}from"./3Yncbi-l.js";import{g as ts,a as ss}from"./CAUbPHnW.js";import{g as os}from"./D4RXr1ss.js";import{E as ns}from"./C7dLEZkI.js";import"./CQdKq0Vt.js";import"./BM-sVEEH.js";import"./Bo10sX-3.js";import"./dXWXmwas.js";import"./yw5b7RCA.js";import"./CXVv3ulD.js";import"./BUADUvnR.js";import"./CRxF1tn9.js";import"./BmIASET-.js";import"./BtvKXLLF.js";const ls=F({name:"ElContainer"}),is=F({...ls,props:{direction:{type:String}},setup(p){const m=p,x=zt(),g=ie("container"),j=fe(()=>m.direction==="vertical"?!0:m.direction==="horizontal"?!1:x&&x.default?x.default().some(C=>{const w=C.type.name;return w==="ElHeader"||w==="ElFooter"}):!1);return(_,C)=>(u(),v("section",{class:W([$(g).b(),$(g).is("vertical",$(j))])},[ae(_.$slots,"default")],2))}});var as=le(is,[["__file","container.vue"]]);const rs=F({name:"ElAside"}),cs=F({...rs,props:{width:{type:String,default:null}},setup(p){const m=p,x=ie("aside"),g=fe(()=>m.width?x.cssVarBlock({width:m.width}):{});return(j,_)=>(u(),v("aside",{class:W($(x).b()),style:Re($(g))},[ae(j.$slots,"default")],6))}});var dt=le(cs,[["__file","aside.vue"]]);const ds=F({name:"ElFooter"}),us=F({...ds,props:{height:{type:String,default:null}},setup(p){const m=p,x=ie("footer"),g=fe(()=>m.height?x.cssVarBlock({height:m.height}):{});return(j,_)=>(u(),v("footer",{class:W($(x).b()),style:Re($(g))},[ae(j.$slots,"default")],6))}});var ut=le(us,[["__file","footer.vue"]]);const ps=F({name:"ElHeader"}),vs=F({...ps,props:{height:{type:String,default:null}},setup(p){const m=p,x=ie("header"),g=fe(()=>m.height?x.cssVarBlock({height:m.height}):{});return(j,_)=>(u(),v("header",{class:W($(x).b()),style:Re($(g))},[ae(j.$slots,"default")],6))}});var pt=le(vs,[["__file","header.vue"]]);const hs=F({name:"ElMain"}),fs=F({...hs,setup(p){const m=ie("main");return(x,g)=>(u(),v("main",{class:W($(m).b())},[ae(x.$slots,"default")],2))}});var vt=le(fs,[["__file","main.vue"]]);Ot(as,{Aside:dt,Footer:ut,Header:pt,Main:vt});const ms=he(dt);he(ut);he(pt);const _s=he(vt),gs=Qt("planet",{state:()=>({filterType:"all",isLoading:!1,currentPage:1,pageSize:6,total:0}),getters:{filterTypeText(){return{all:"全部",recent:"最近",hot:"热门"}[this.filterType]||"全部"},isFilterType:p=>m=>p.filterType===m},actions:{setFilterType(p){this.filterType=p,this.currentPage=1},setLoading(p){this.isLoading=p},setPagination(p,m){this.currentPage=p,this.total=m},reset(){this.filterType="all",this.isLoading=!1,this.currentPage=1,this.total=0}}}),ws=p=>(console.log("发送了1次"),ct("/Websquare/create",p)),ys=(p,m,x,g="all")=>Ue(`/Websquare/getAllSquare/${p}/${m}/${x}?type=${g}`),bs=p=>Zt.get(`/Websquare/likeClickComment/${p}`),nt=p=>Ue(`/WebSquareComment/getPlanetIdComment/${p}`),Ne=p=>ct("/WebSquareComment/addPlanetComment",p),lt=p=>Ue(`/WebSquareComment/likeClickComment/${p}`),ks=["daxiao","jingxia","ku_1","qushi","tushe","dianyan","jingya","kunao","se","weixiao","fadai","kouzhao","liuhan","shengbing","xiaoku","jinchi","ku","qinqin","tianshi","yihuo"],xs={class:"flex flex-wrap pt-2",style:{gap:"10px"}},Cs=["src","onClick"],Ts=F({__name:"index",emits:["show","append","clearCache"],setup(p,{expose:m,emit:x}){const g=x,j=h(ks),_=h(),C=h(""),w=h(0);function M(E){const S=Date.now();if(E===C.value&&S-w.value<300){console.log("Duplicate emoji click ignored:",E);return}console.log("Emoji clicked:",E,"at time:",S),C.value=E,w.value=S,g("append",E),setTimeout(()=>{_.value&&_.value.hide()},100),setTimeout(()=>{D()},200)}function D(){C.value="",w.value=0,g("clearCache"),console.log("Emoji selection cache cleared")}return m({clearSelectionCache:D}),(E,S)=>{const A=ns,U=it,N=Vt;return u(),Pe(N,null,{default:L(()=>[b(U,{ref_key:"popoverRef",ref:_,placement:"bottom-start",title:"",width:"416",trigger:"click",class:"!p-2",teleported:!1,onShow:S[0]||(S[0]=z=>g("show"))},{reference:L(()=>S[1]||(S[1]=[e("div",{title:"表情",class:"w-[22px] h-[22px] cursor-pointer text-[#8a919f] hover:text-primary"},[e("div",{class:"emoji-icon"})],-1)])),default:L(()=>[b(A,{height:"120px",class:"w-[416px]"},{default:L(()=>[e("div",xs,[(u(!0),v(Z,null,ee(j.value,(z,me)=>(u(),v("img",{class:W(["hover:scale-[1.2] sm:cursor-pointer",`em ${z} `]),key:me,style:{"font-size":"28px",padding:"1.8px"},src:`/emoji/${z}.png`,onClick:oe=>M(z)},null,10,Cs))),128))])]),_:1})]),_:1},512)]),_:1})}}}),ve=Object.assign(at(Ts,[["__scopeId","data-v-bb7279c7"]]),{__name:"Emoji"}),$s=()=>{const p=et(null),m=et(null),x=h(!1),g=h("快来说两句吧..."),j=h(0),_=()=>{m.value?.focus()},C=()=>{const E=m.value;if(!E)return;let S=0;for(const A of E.childNodes){if(A.nodeType===Node.TEXT_NODE){const U=A.textContent||"";S+=U.trim().length,console.log(U)}if(A.nodeName==="DIV"){const U=A.outerText||"";S+=U.trim().length}A.nodeType===1&&(S+=1)}j.value=S,S?g.value="":g.value="快来说两句吧..."},w=()=>{j.value=0,m.value.innerHTML=""},M=()=>{const E=m.value;E.focus();const S=document.createRange(),A=window.getSelection();S.selectNodeContents(E),S.collapse(!1),A.removeAllRanges(),A.addRange(S)},D=E=>{const S=E.target,A=p.value;if(!A){x.value=!1;return}A.contains(S)||(x.value=!1)};return rt(()=>{window.addEventListener("mousedown",D)}),Wt(()=>{window.removeEventListener("mousedown",D)}),{commenterRef:p,richInputRef:m,inputFocus:x,placeholder:g,inputLength:j,onRichFocus:_,onInputText:C,clearInputText:w,moveCursorToEnd:M}},Ss=()=>{const p=h(null),m=async _=>{p.value=await j();const C=p.value.range,w=C.endContainer,M=C.endOffset;C.commonAncestorContainer?.dataset?.placeholder&&(C.commonAncestorContainer.dataset.placeholder=""),C.setStart(w,M),C.setEnd(w,M),C.deleteContents();const D=x(_);g(D,p.value.selection,p.value.range)},x=_=>{const C=document.createElement("img");return C.setAttribute("src",`/emoji/${_}.png`),C.setAttribute("style","width: 24px; height: 24px; transform: scale(0.9); cursor: default;"),C},g=(_,C,w)=>{if(w&&C){const M=document.createElement("div");typeof _=="string"?M.innerHTML=_:Array.isArray(_)?_.forEach(A=>{M.appendChild(A)}):M.appendChild(_);const D=document.createDocumentFragment();let E,S;for(;E=M.firstChild;)S=D.appendChild(E);w.insertNode(_),S&&C.collapseToEnd()}},j=()=>new Promise((_,C)=>{const w=window.getSelection();if(w.getRangeAt&&w.rangeCount){const M=w.getRangeAt(0);_({range:M,selection:w})}else C(null)});return{appendEmoji:m}},Ls=()=>{const p=h([]);return{fileList:p,onUpload:g=>{p.value.push(g.uri)},removeFile:g=>{p.value.splice(g,1)}}},Es={class:"content"},Is={"data-server-rendered":"true",id:"__nuxt"},js={id:"__layout"},As={"data-fetch-key":"0",class:"app macwk-animation"},Ms={class:"body"},Ns={class:"container"},Ps={class:"row"},Rs={class:"sidebar-innter widget-ffixed"},Us={id:"b2-widget-circle-info-2",class:"mobile-hidden widget b2-widget-circle-info mg-b box b2-radius-aside-left"},qs={class:"b2-widget-box"},Fs={class:"about-widget"},Hs={class:"user-w-announcement"},Ds={class:"planet-aside-ul"},Bs={class:"planet-aside-li el-icon-ice-cream-round"},Os={class:"planet-aside-li el-icon-ice-cream-round"},zs={class:"planet-aside-li el-icon-ice-cream-round"},Qs={class:"circle-widget-button"},Vs={class:"sidebar-innter widget-ffixed"},Ws={id:"b2-widget-circle-info-2",class:"mobile-hidden widget b2-widget-circle-info mg-b box b2-radius-aside-left-plant"},Gs={class:"b2-widget-box"},Js={class:"about-widget"},Xs={key:0,class:"PlanetListCare"},Ks={style:{"margin-left":"10px"},class:"PlanetListItems"},Ys={class:"PlanetListItem-img"},Zs={class:"PlanetListItem-info"},eo={class:"PlanetListItem-title"},to={class:"planetTitletext",href:"#"},so={class:"widget-mission-footer"},oo={class:"circle-top white"},no={id:"po-topic-box",class:"box b2-radius"},lo={class:"po-topic"},io={class:"circle-info"},ao={class:"circle-info-in"},ro={class:"circle-info-left"},co=["src"],uo={class:"planeth1"},po={key:0,class:"nologin"},vo={key:1},ho=["data-placeholder"],fo={style:{display:"flex","justify-content":"flex-start","align-content":"center","flex-wrap":"wrap","flex-direction":"row-reverse"},class:"flex items-center gap-x-5"},mo={class:"topic-type-menu white"},_o={class:"planetul"},go={class:"planetli"},wo={class:"planetli"},yo={class:"planetli"},bo={class:"circle-contenr"},ko={class:"topic-header"},xo={class:"topic-header-left"},Co={class:"topic-avatar"},To={class:"topic-name"},$o={class:"topic-name-data"},So={target:"_blank"},Lo={class:"topic-header-right"},Eo={class:"topic-date topic-circle"},Io={target:"_blank"},jo={class:"topic-content"},Ao=["innerHTML"],Mo={key:0,style:{padding:"30px",display:"flex","flex-direction":"row",width:"521px",height:"230px","margin-right":"10px"}},No={class:"topic-footer"},Po={class:"topic-footer-left"},Ro=["onClick"],Uo={class:"el-icon-caret-planettext"},qo=["onClick"],Fo={class:"el-icon-caret-planettext"},Ho=["onClick"],Do=["onClick"],Bo={class:"topic-date"},Oo={class:"b2timeago",datetime:"2021-12-27 21:58:17",itemprop:"datePublished"},zo=["textContent"],Qo={class:"topic-meta-more-box"},Vo={class:"share-content"},Wo={class:"share-buttons"},Go={class:"share-row"},Jo=["onClick"],Xo=["onClick"],Ko=["onClick"],Yo=["onClick"],Zo={class:"topic-footer-right"},en={class:"reply-box-root"},tn={class:"commenter-container"},sn={class:"commenter-wrapper"},on=["id"],nn={class:"commenter-footer"},ln={class:"flex items-center gap-x-5"},an={class:"flex items-center gap-x-5"},rn={class:"commentBox"},cn={class:"css-we6n55"},dn={class:"css-vpssrj"},un={class:"css-1k10w8f"},pn={key:0,class:"commentCons"},vn={key:1},hn={key:0},fn={class:"circle-contenr"},mn={class:"topic-header"},_n={class:"topic-header-left"},gn={class:"topic-avatar"},wn={class:"topic-name"},yn={class:"topic-name-data"},bn={target:"_blank"},kn={class:"topic-content"},xn=["innerHTML"],Cn={class:"topic-footer"},Tn={class:"topic-footer-left"},$n={class:"topic-date"},Sn={class:"b2timeago",datetime:"2021-12-27 21:58:17",itemprop:"datePublished"},Ln=["textContent"],En={class:"chat-dot-round"},In=["onClick"],jn=["onClick"],An={class:"like-num"},Mn=["onClick"],Nn={class:"like-num"},Pn={class:"reply-box"},Rn={class:"commenter-container"},Un={class:"commenter-wrapper"},qn=["id"],Fn={class:"commenter-footer"},Hn={class:"flex items-center gap-x-5"},Dn={class:"flex items-center gap-x-5"},Bn={key:0,class:"comments"},On={class:"circle-contenr"},zn={class:"topic-header"},Qn={class:"topic-header-left"},Vn={class:"topic-avatar"},Wn={class:"topic-name"},Gn={key:0,class:"topic-name-data"},Jn={target:"_blank"},Xn={key:1,class:"topic-name-data"},Kn={target:"_blank"},Yn={class:"topic-content"},Zn=["innerHTML"],el={class:"topic-footer"},tl={class:"topic-footer-left"},sl={class:"topic-date"},ol={class:"b2timeago",datetime:"2021-12-27 21:58:17",itemprop:"datePublished"},nl=["textContent"],ll={class:"chat-dot-round"},il=["onClick"],al=["onClick"],rl={class:"like-num"},cl=["onClick"],dl={class:"like-num"},ul={class:"reply-box"},pl={class:"commenter-container"},vl={class:"commenter-wrapper"},hl=["id"],fl={class:"commenter-footer"},ml={class:"flex items-center gap-x-5"},_l={class:"flex items-center gap-x-5"},gl={id:"b2-widget-user-6",class:"mobile-hidden widget b2-widget-user mg-b b2-radius b2-radius-aside-right"},wl={class:"b2-widget-box"},yl={id:"user-widget",class:"user-widget"},bl={class:"user-widget-content"},kl={style:{}},xl={class:"user-w-logon"},Cl={class:"user-w-logon-title b2-color"},Tl={class:"user-w-announcement"},$l={class:"planet-aside-ul"},Sl={class:"planet-aside-li-ad"},Ll={href:"#"},El={class:"widget-mission-footer"},Il={key:0,class:"loading-indicator"},jl={key:1},Al={class:"help-modal-header"},Ml={class:"help-modal-body"},Nl=["innerHTML"],Pl=F({__name:"[id]",props:{pid:{default:""},reply_id:{default:""}},emits:["blur","submit"],async setup(p,{expose:m,emit:x}){let g,j;const _=Gt(),C=Jt(),w=gs(),{filterType:M,isLoading:D}=Xt(w);function E(s){if(!s)return"";const t=/\[([^\]]+?)\]/g;return s.replace(t,(r,n)=>`<img src="/emoji/${n}.png" class="emoji-icon" alt="${n}" style="width: 24px; height: 24px; vertical-align: middle;" />`)}const S=h([]);h(!1);const A=h(0),U=h(!1),N=h(!1);h("");const z=h(!1);h(!1),h([]),h(new FormData);const me=h(""),oe=h(1);h(""),h(!1);const _e=h({}),re=h([]),Q=h([]),qe=h(!1),G=pe({image:[],isLock:!1,content:"",author:"",sortClass:""}),O=pe({content:"",parentId:"",userId:"",postId:""}),q=pe({content:"",parentId:"",userId:"",postId:""}),P=pe({content:"",parentId:"",userId:"",toUserId:"",postId:""}),J=h(!1),I=h([]),ht=h("nav-link active"),ft=h({}),mt=x,{commenterRef:_t,richInputRef:Fe,inputFocus:ce,placeholder:gt,inputLength:de,onRichFocus:ue,onInputText:He,clearInputText:wt,moveCursorToEnd:ge}=$s();[g,j]=tt(()=>yt()),await g,j();async function yt(){try{const s=await os(4);S.value=s}catch(s){console.error("获取Announcementslist出错:",s)}}const{appendEmoji:bt}=Ss(),{fileList:we}=Ls();st(ce,s=>{s!=!0&&setTimeout(()=>{mt("blur")},300)},{immediate:!1});const kt=async()=>{if(de.value>=1e3){k.warning("字数超过限制，请删减后发送");return}if(N.value){k.warning("正在发布中，请勿重复点击");return}const s=Fe.value.innerHTML,t=/<img src="\/emoji\/(.+?)".*?>/g;let r=s,n;for(;(n=t.exec(s))!==null;){const l=`[${n[1].split("/").pop().split(".")[0]}]`;r=r.replace(n[0],l)}if(!r.trim()&&we.value.length===0){k.warning("请输入内容或上传图片");return}const a=ne();if(!a.userid){k.warning("请先登录"),J.value=!0;return}N.value=!0;try{G.content=r,G.author=a.userid,G.sortClass=_.params.id||"",G.image=JSON.stringify(we.value.map(l=>({url:l.url,name:l.name})));const o=_.params.id||"circle";await ws(G),De(),G.content="",G.image="[]",await te(),k.success("发表成功")}catch(o){console.error("发布失败:",o),k.error("发布失败，请重试")}finally{setTimeout(()=>{N.value=!1},1e3)}},xt=async s=>{s.preventDefault();const t=(s.originalEvent||s).clipboardData.getData("text/plain");document.execCommand("insertText",!1,t)},De=()=>{wt(),we.value=[]};m({onRichFocus:ue,clearInputContent:De});const Ct=Ht();ft.value=Ct.settings,st(()=>_.params.id,()=>{w.reset(),te()});const te=async s=>{Q.value=[],oe.value=1,s&&w.setFilterType(s),await Be()};async function Be(){Q.value.length!==A.value&&(U.value=!0,w.setLoading(!0));try{const s=await ys(_.params.id,oe.value,6,M.value);A.value=s.total,w.setPagination(oe.value,s.total),Q.value=Q.value.concat(s.data.map(r=>(r.image=JSON.parse(r.image),r)));const t=await ss(_.params.id);_e.value=t}catch(s){console.error(s)}finally{U.value=!1,w.setLoading(!1)}}[g,j]=tt(()=>Tt()),await g,j();async function Tt(){try{const s=await ts();re.value=s,!_.params.id&&re.value.length>0&&C.push({path:`/planet/${re.value[0].id}`})}catch(s){console.error(s)}}const ye=s=>{const r=new Date().getTime(),n=new Date(s).getTime(),a=r-n,o=Math.floor(a/(24*3600*1e3)),l=Math.floor(a/(24*3600*1e3*365));return o===0?Math.floor(a/(3600*1e3))===0?Math.floor(a/(60*1e3))===0?"刚刚":`${Math.floor(a/(60*1e3))}分钟前`:`${Math.floor(a/(3600*1e3))}小时前`:o===1?"昨天":o===2?"前天":o>2&&o<7?"最近一周":l===1?"去年":l>1?`${l}年前`:new Date(s).toLocaleDateString()},Oe=async s=>{s.isLike?(s.isLike=!1,s.loveNum--):(s.isLike=!0,s.loveNum++,await lt(s.id))},$t=()=>{window.onscroll=()=>{const s=document.documentElement.scrollTop||document.body.scrollTop,t=document.documentElement.clientHeight||document.body.clientHeight||window.innerHeight,r=document.documentElement.scrollHeight||document.body.scrollHeight,n=s+t-r;(n===.5||n===0)&&(oe.value++,Be()),Q.value.length===A.value&&(U.value=!1,w.setLoading(!1))}},X=h(""),be=h("社区动态 - IceCMS"),St=h("发现更多有趣内容，参与社区讨论"),ke=h(!1),ze=h(""),xe=h(""),Ce=h(""),Lt={create:{title:"怎么创建圈子？",content:`
      <div class="help-content">
        <h3>创建圈子指南</h3>
        <div class="step-list">
          <div class="step-item">
            <div class="step-number">1</div>
            <div class="step-content">
              <h4>准备工作</h4>
              <p>确保您已经完成实名认证，并且账户状态正常。新用户需要注册满7天才能创建圈子。</p>
            </div>
          </div>
          <div class="step-item">
            <div class="step-number">2</div>
            <div class="step-content">
              <h4>提交申请</h4>
              <p>点击"创建圈子"按钮，填写圈子名称、描述、分类等基本信息。圈子名称需要具有独特性，不能与现有圈子重复。</p>
            </div>
          </div>
          <div class="step-item">
            <div class="step-number">3</div>
            <div class="step-content">
              <h4>审核流程</h4>
              <p>提交申请后，管理员会在1-3个工作日内完成审核。审核通过后，您将收到通知，圈子正式开放。</p>
            </div>
          </div>
          <div class="step-item">
            <div class="step-number">4</div>
            <div class="step-content">
              <h4>圈子管理</h4>
              <p>作为圈主，您可以邀请管理员、制定圈子规则、管理成员、发布公告等。请确保圈子内容健康、积极。</p>
            </div>
          </div>
        </div>
        <div class="help-tips">
          <h4>💡 小贴士</h4>
          <ul>
            <li>圈子名称建议简洁明了，便于用户理解和搜索</li>
            <li>详细的圈子描述有助于吸引更多志同道合的用户</li>
            <li>选择合适的分类能让更多用户发现您的圈子</li>
            <li>定期发布优质内容，活跃圈子氛围</li>
          </ul>
        </div>
      </div>
    `},communication:{title:"如何进行沟通？",content:`
      <div class="help-content">
        <h3>圈子沟通指南</h3>
        <div class="comm-section">
          <h4>🗣️ 发布动态</h4>
          <ul>
            <li>在圈子首页点击发布框，分享您的想法、经验或问题</li>
            <li>支持文字、图片、链接等多种内容形式</li>
            <li>使用话题标签，让内容更容易被发现</li>
            <li>遵守圈子规则，发布有价值的内容</li>
          </ul>
        </div>
        
        <div class="comm-section">
          <h4>💬 评论互动</h4>
          <ul>
            <li>在感兴趣的动态下方进行评论</li>
            <li>可以回复其他用户的评论，形成讨论</li>
            <li>使用表情包让交流更生动有趣</li>
            <li>尊重他人观点，保持友善讨论</li>
          </ul>
        </div>
        
        <div class="comm-section">
          <h4>👍 点赞收藏</h4>
          <ul>
            <li>对喜欢的内容点赞，表达支持</li>
            <li>收藏有价值的内容，方便日后查看</li>
            <li>分享优质内容给更多朋友</li>
          </ul>
        </div>
        
        <div class="comm-section">
          <h4>🔔 消息通知</h4>
          <ul>
            <li>及时查看系统通知和私信</li>
            <li>关注感兴趣的用户，获取最新动态</li>
            <li>开启推送通知，不错过重要消息</li>
          </ul>
        </div>
        
        <div class="help-tips">
          <h4>💡 沟通技巧</h4>
          <ul>
            <li>保持积极正面的沟通态度</li>
            <li>用事实和逻辑支撑观点</li>
            <li>避免人身攻击和恶意言论</li>
            <li>多倾听他人意见，开放讨论</li>
          </ul>
        </div>
      </div>
    `},terms:{title:"圈子条款",content:`
      <div class="help-content">
        <h3>IceCMS 圈子服务条款</h3>
        
        <div class="terms-section">
          <h4>第一条 服务说明</h4>
          <p>IceCMS圈子是为用户提供的社区交流服务平台。用户可以在圈子中发布内容、参与讨论、分享经验等。</p>
        </div>
        
        <div class="terms-section">
          <h4>第二条 用户行为规范</h4>
          <ol>
            <li><strong>内容规范：</strong>不得发布违法、有害、虚假、侵权的内容</li>
            <li><strong>言论规范：</strong>保持文明用语，不得进行人身攻击或恶意诽谤</li>
            <li><strong>版权规范：</strong>尊重他人知识产权，不得未经授权转载他人作品</li>
            <li><strong>隐私规范：</strong>不得泄露他人隐私信息</li>
          </ol>
        </div>
        
        <div class="terms-section">
          <h4>第三条 圈主权利与义务</h4>
          <ol>
            <li><strong>管理权利：</strong>圈主有权制定圈子规则、管理成员、删除违规内容</li>
            <li><strong>维护义务：</strong>圈主应维护圈子秩序，确保内容健康积极</li>
            <li><strong>责任义务：</strong>对圈子内违法违规行为承担管理责任</li>
          </ol>
        </div>
        
        <div class="terms-section">
          <h4>第四条 平台权利</h4>
          <ol>
            <li>对违规内容进行删除、屏蔽处理</li>
            <li>对违规用户进行警告、限制、封禁等处理</li>
            <li>对违规圈子进行整改、关闭等处理</li>
            <li>根据法律法规要求配合相关部门调查</li>
          </ol>
        </div>
        
        <div class="terms-section">
          <h4>第五条 免责声明</h4>
          <p>平台不对用户发布的内容承担法律责任，用户应对自己的言行负责。因用户违规行为导致的任何法律后果，由用户自行承担。</p>
        </div>
        
        <div class="terms-section">
          <h4>第六条 条款变更</h4>
          <p>平台有权根据法律法规变化和业务发展需要修改本条款。修改后的条款将在平台公布，用户继续使用服务即视为同意新条款。</p>
        </div>
        
        <div class="terms-section">
          <h4>第七条 联系方式</h4>
          <p>如有疑问或建议，请通过以下方式联系我们：</p>
          <ul>
            <li>邮箱：support@icecms.cn</li>
            <li>客服QQ：123456789</li>
            <li>工作时间：周一至周五 9:00-18:00</li>
          </ul>
        </div>
        
        <div class="update-time">
          <p><small>最后更新时间：2024年1月1日</small></p>
        </div>
      </div>
    `}},Te=s=>{const t=Lt[s];t&&(ze.value=s,xe.value=t.title,Ce.value=t.content,ke.value=!0)},$e=()=>{ke.value=!1,ze.value="",xe.value="",Ce.value=""};X.value=window.location.href;const Et=s=>{const t=encodeURIComponent(X.value),r=encodeURIComponent(s?`${s.author} 的动态`:be.value),n=encodeURIComponent(s?s.content.replace(/<[^>]*>/g,"").substring(0,100):St.value),a=`https://connect.qq.com/widget/shareqq/index.html?url=${t}&title=${r}&desc=${n}&summary=${n}&site=IceCMS`;window.open(a,"_blank","width=600,height=400")},It=s=>{const t=encodeURIComponent(X.value),n=`${encodeURIComponent(s?`${s.author} 的动态`:be.value)} ${t}`,a=`https://service.weibo.com/share/share.php?url=${t}&title=${n}&pic=`;window.open(a,"_blank","width=600,height=400")},jt=s=>{const t=s?`${s.author} 的动态: ${s.content.replace(/<[^>]*>/g,"").substring(0,50)}...`:be.value;navigator.clipboard?.writeText(`${t} ${X.value}`).then(()=>{alert("内容已复制到剪切板，可以分享到微信了！")}).catch(()=>{prompt("请复制以下内容分享到微信:",`${t} ${X.value}`)})},At=s=>{navigator.clipboard?.writeText(X.value).then(()=>{alert("链接已复制到剪切板！")}).catch(()=>{prompt("请复制以下链接:",X.value)})};rt(()=>{qe.value=!0,te(),$t();const s=ne();s.userid?(z.value=!0,console.log("用户已登录:",s.name)):(z.value=!1,console.log("用户未登录"))});const Qe=async s=>{if(I.value=[],s.isShow)s.isShow=!s.isShow;else{try{console.log("正在获取评论，postId:",s.id);const t=await Promise.race([nt(s.id),new Promise((n,a)=>setTimeout(()=>a(new Error("获取评论超时")),8e3))]);console.log("获取评论响应:",t);let r=[];t&&t.data?r=Array.isArray(t.data)?t.data:[]:Array.isArray(t)?r=t:(console.warn("评论数据格式异常:",t),r=[]);try{I.value=await Promise.race([Je(r),new Promise(n=>setTimeout(()=>{console.warn("用户信息获取超时，使用原始评论数据"),n(r)},5e3))])}catch(n){console.error("处理评论数据失败，使用原始数据:",n),I.value=r}console.log("设置评论数据:",I.value)}catch(t){console.error("获取评论失败:",t),I.value=[],k.error("获取评论失败，请重试")}Object.prototype.hasOwnProperty.call(s,"isShow")||(s.isShow=!1),s.isShow=!s.isShow}},Mt=s=>{Object.prototype.hasOwnProperty.call(s,"isShow")||(s.isShow=!1),s.isShow=!s.isShow},Nt=s=>{Object.prototype.hasOwnProperty.call(s,"isShow")||(s.isShow=!1),s.isShow=!s.isShow},Ve=async s=>{if(s.isLose&&(s.isLose=!1),s.isLike)s.isLike=!1,s.loveNum=Math.max(0,(s.loveNum||0)-1);else{Object.prototype.hasOwnProperty.call(s,"isLike")||(s.isLike=!1),s.isLike=!0,s.loveNum=(s.loveNum||0)+1;try{await bs(s.id)}catch(t){console.error("点赞失败:",t),s.isLike=!1,s.loveNum=Math.max(0,s.loveNum-1)}}},We=s=>{s.isLike&&(s.isLike=!1,s.loveNum=Math.max(0,(s.loveNum||0)-1)),Object.prototype.hasOwnProperty.call(s,"isLose")||(s.isLose=!1),s.isLose=!s.isLose},Ge=async s=>{if(s.isLike)s.loveNum--,s.isLike=!s.isLike;else{Object.prototype.hasOwnProperty.call(s,"isLike")||(s.isLike=!1),s.isLike=!s.isLike;try{await lt(s.id)}catch(t){console.error("点赞失败:",t)}s.loveNum++}},se=h(new Map),Pt=async s=>{const t=[...new Set(s)],r=t.map(async o=>{if(se.value.has(o))return{userId:o,userInfo:se.value.get(o)};try{const l=await Promise.race([es(o),new Promise((y,B)=>setTimeout(()=>B(new Error("User info timeout")),3e3))]);let c="未知用户";return l&&l.data?c=l.data.othername||l.data.name||"未知用户":l&&l.othername&&(c=l.othername),se.value.set(o,c),{userId:o,userInfo:c}}catch(l){return console.error("获取用户信息失败:",o,l),se.value.set(o,"未知用户"),{userId:o,userInfo:"未知用户"}}}),n=await Promise.allSettled(r),a=new Map;return n.forEach((o,l)=>{if(o.status==="fulfilled"){const{userId:c,userInfo:y}=o.value;a.set(c,y)}else a.set(t[l],"未知用户")}),a},Je=async s=>{if(!s||!Array.isArray(s))return s;const t=[];s.forEach(a=>{a.reply&&Array.isArray(a.reply)&&a.reply.forEach(o=>{o.toUserId&&o.toUserId!==0&&!se.value.has(o.toUserId)&&t.push(o.toUserId)})});let r=new Map;if(t.length>0)try{r=await Pt(t)}catch(a){console.error("批量获取用户信息失败:",a)}return s.map(a=>{const o={...a};return a.reply&&Array.isArray(a.reply)&&(o.reply=a.reply.map(l=>{const c={...l};return l.toUserId&&l.toUserId!==0&&(c.toUserName=se.value.get(l.toUserId)||r.get(l.toUserId)||"未知用户"),c})),o})},V=async(s,t=0)=>{try{console.log("刷新帖子评论，postId:",s,"retry:",t);const n=await Promise.race([nt(s),new Promise((c,y)=>setTimeout(()=>y(new Error("获取评论超时")),8e3))]);console.log("获取评论响应:",n);let a=[];n&&n.data?a=Array.isArray(n.data)?n.data:[]:Array.isArray(n)?a=n:(console.warn("评论数据格式异常:",n),a=[]);try{I.value=await Promise.race([Je(a),new Promise(c=>setTimeout(()=>{console.warn("用户信息获取超时，使用原始评论数据"),c(a)},5e3))])}catch(c){console.error("处理评论数据失败，使用原始数据:",c),I.value=a}console.log("刷新后的评论数据:",I.value);const o=Q.value.find(c=>c.id===s);o&&(o.commentNum=I.value.length,console.log("更新帖子评论数量为:",I.value.length));const l=Q.value.find(c=>c.id===s);l&&!l.isShow&&(l.isShow=!0)}catch(n){console.error("刷新评论失败:",n),t<2?(console.log(`刷新评论失败，进行第${t+1}次重试`),setTimeout(()=>{V(s,t+1)},1e3*(t+1))):k.error("刷新评论失败，请手动刷新页面")}},Rt=async s=>{if(N.value){console.log("正在提交评论，请勿重复点击");return}const t=document.getElementById(`reply-input-${s.id}`);if(t){const n=t.innerHTML,a=/<img src="\/emoji\/(.+?)".*?>/g;let o=n,l;for(;(l=a.exec(n))!==null;){const y=`[${l[1].split("/").pop().split(".")[0]}]`;o=o.replace(l[0],y)}O.content=o.replace(/<[^>]*>/g,"").trim()}if(!O.content||O.content.trim()===""){k.warning("评论内容不能为空");return}O.postId=s.id;const r=ne();if(r.userid)O.userId=r.userid,J.value=!1;else{J.value=!0,k.warning("请先登录");return}N.value=!0;try{console.log("提交评论:",O);const n=await Ne(O);console.log("评论提交结果:",n),O.content="",t&&(t.innerHTML=""),await V(s.id),k.success("评论发布成功")}catch(n){console.error("发布评论失败:",n),k.error("评论发布失败，请重试")}finally{setTimeout(()=>{N.value=!1},1e3)}},Ut=async(s,t,r)=>{if(N.value){k.warning("正在提交回复，请稍候");return}const n=document.getElementById(`replys-input-${t}`);if(n){const o=n.innerHTML,l=/<img src="\/emoji\/(.+?)".*?>/g;let c=o,y;for(;(y=l.exec(o))!==null;){const K=`[${y[1].split("/").pop().split(".")[0]}]`;c=c.replace(y[0],K)}q.content=c.replace(/<[^>]*>/g,"").trim()}if(!q.content||q.content.trim()===""){k.warning("回复内容不能为空");return}q.postId=r,q.parentId=t;const a=ne();if(a.userid)q.userId=a.userid,J.value=!1;else{J.value=!0,k.warning("请先登录");return}N.value=!0;try{console.log("提交回复数据:",q);const o=await Ne(q);console.log("回复提交响应:",o),o&&(o.code===0||o.code==="0"||o.status==="success"||o.success===!0||o.data&&!o.error||!o.code&&!o.error)?(q.content="",n&&(n.innerHTML=""),await V(r),k.success("回复发布成功")):(console.warn("API响应格式异常，尝试刷新数据:",o),await V(r),I.value&&I.value.length>0?(q.content="",n&&(n.innerHTML=""),k.success("回复发布成功")):k.error(o.msg||o.message||"回复发布失败"))}catch(o){console.error("发布回复失败:",o);try{if(await V(r),I.value&&I.value.length>0){q.content="",n&&(n.innerHTML=""),k.success("回复发布成功");return}}catch(l){console.error("刷新评论失败:",l)}k.error("回复发布失败，请重试")}finally{setTimeout(()=>{N.value=!1},1e3)}},qt=async(s,t,r,n)=>{if(N.value){k.warning("正在提交回复，请稍候");return}const a=s;let o=document.getElementById(`replysToUser-input-${a}`);if(!o){const c=document.querySelectorAll('[id*="replysToUser-input"]'),y=Array.from(c).find(B=>B.offsetParent!==null);y&&(o=y)}if(o){const c=o.innerHTML,y=/<img src="\/emoji\/(.+?)".*?>/g;let B=c,K;for(;(K=y.exec(c))!==null;){const je=`[${K[1].split("/").pop().split(".")[0]}]`;B=B.replace(K[0],je)}P.content=B.replace(/<[^>]*>/g,"").trim()}if(!P.content||P.content.trim()===""){k.warning("回复内容不能为空");return}P.postId=r,P.parentId=t,P.toUserId=n;const l=ne();if(l.userid)P.userId=l.userid,J.value=!1;else{J.value=!0,k.warning("请先登录");return}N.value=!0;try{console.log("提交回复数据:",P);const c=await Ne(P);console.log("回复提交响应:",c),c&&(c.code===0||c.code==="0"||c.status==="success"||c.success===!0||c.data&&!c.error||!c.code&&!c.error)?(P.content="",o&&(o.innerHTML=""),await V(r),k.success("回复发布成功")):(console.warn("API响应格式异常，尝试刷新数据:",c),await V(r),I.value&&I.value.length>0?(P.content="",o&&(o.innerHTML=""),k.success("回复发布成功")):k.error(c.msg||c.message||"回复发布失败"))}catch(c){console.error("发布回复失败:",c);try{if(await V(r),I.value&&I.value.length>0){P.content="",o&&(o.innerHTML=""),k.success("回复发布成功");return}}catch(y){console.error("刷新评论失败:",y)}k.error("回复发布失败，请重试")}finally{setTimeout(()=>{N.value=!1},1e3)}},Se=(s,t)=>{const n=s.target.innerHTML,a=/<img src="\/emoji\/(.+?)".*?>/g;let o=n,l;for(;(l=a.exec(n))!==null;){const y=`[${l[1].split("/").pop().split(".")[0]}]`;o=o.replace(l[0],y)}t==="postReplyForm"?O.content=o:t==="postReplysForm"?q.content=o:t==="postReplysToUserForm"&&(P.content=o)},Le=async(s,t)=>{const r=document.getElementById(t);if(!r){console.error("目标输入框未找到:",t);return}r.focus();const n=window.getSelection();if(n&&n.rangeCount>0){const o=n.getRangeAt(0);r.contains(o.commonAncestorContainer)||(o.selectNodeContents(r),o.collapse(!1),n.removeAllRanges(),n.addRange(o))}else{const o=document.createRange();o.selectNodeContents(r),o.collapse(!1);const l=window.getSelection();l&&(l.removeAllRanges(),l.addRange(o))}const a=window.getSelection();if(a&&a.rangeCount>0){const o=a.getRangeAt(0),l=document.createElement("img");l.src=`/emoji/${s}.png`,l.style.cssText="width: 20px; height: 20px; vertical-align: middle; margin: 0 2px;",l.className="emoji-icon",l.alt=s,o.deleteContents(),o.insertNode(l),o.setStartAfter(l),o.setEndAfter(l),a.removeAllRanges(),a.addRange(o);const c=new Event("input",{bubbles:!0});r.dispatchEvent(c)}},Ee=s=>{const t=s.target;t.innerHTML.trim()===""&&t.setAttribute("data-placeholder","")},Ie=s=>{const t=s.target;if(t.innerHTML.trim()===""){const r=t.getAttribute("data-placeholder");r&&t.setAttribute("data-placeholder",r)}};return(s,t)=>{const r=Dt,n=Ke,a=Bt,o=Ke,l=ms,c=Ze,y=Ze,B=Yt,K=it,Xe=_s,je=Kt("router-link");return u(),v("div",Es,[e("div",Is,[e("div",js,[e("div",As,[b(r,{message5:ht.value},null,8,["message5"]),e("div",null,[e("div",Ms,[e("div",Ns,[e("div",Ps,[b(l,{width:"260px"},{default:L(()=>[e("div",Rs,[e("section",Us,[t[24]||(t[24]=e("div",{class:"b2-widget-title"},[e("h2",{class:"widget-title"},"找到你自己的圈子")],-1)),e("div",qs,[e("div",Fs,[e("div",Hs,[e("ul",Ds,[e("li",Bs,[e("a",{href:"javascript:void(0)",onClick:t[0]||(t[0]=i=>Te("create"))},"怎么创建圈子？")]),e("li",Os,[e("a",{href:"javascript:void(0)",onClick:t[1]||(t[1]=i=>Te("communication"))},"如何进行沟通？")]),e("li",zs,[e("a",{href:"javascript:void(0)",onClick:t[2]||(t[2]=i=>Te("terms"))},"圈子条款")])])]),e("div",Qs,[b(n,{to:"/CreatePlanet"},{default:L(()=>t[23]||(t[23]=[e("button",{class:"text-great"}," 创建圈子 ",-1)])),_:1})])])])])]),e("div",Vs,[e("section",Ws,[t[26]||(t[26]=e("div",{class:"b2-widget-title"},[e("h2",{class:"widget-title-plant"},"推荐圈子")],-1)),e("div",Gs,[e("div",Js,[qe.value?(u(),v("div",Xs,[(u(!0),v(Z,null,ee(re.value,i=>(u(),v("div",{key:i.id,class:"PlanetListItem"},[b(o,{href:"/planet/"+i.id},{default:L(()=>[e("div",Ks,[e("div",Ys,[b(a,{shape:"square",size:38,src:i.imgclass},null,8,["src"])]),e("div",Zs,[e("div",eo,[e("a",to,[e("span",null,T(i.name),1)])])])])]),_:2},1032,["href"])]))),128))])):Y("",!0)])]),e("div",so,[b(o,{to:"/AllPlanet",class:"allad"},{default:L(()=>t[25]||(t[25]=[R("全部圈子")])),_:1})])])])]),_:1}),b(Xe,null,{default:L(()=>[e("div",oo,[e("div",no,[e("div",lo,[e("div",io,[e("div",ao,[e("div",ro,[e("img",{"data-src":"",alt:"",src:_e.value.imgclass,"data-was-processed":"true",class:"topimg"},null,8,co),e("h1",uo,[e("p",null,[e("b",null,T(_e.value.name),1),t[27]||(t[27]=e("span",{class:"mobile-show"},[e("i",{class:"b2font b2-arrow-right-s-line picked"})],-1))]),t[28]||(t[28]=e("a",{target:"_blank"},[e("span",null,"Alextao"),e("span",null,"(圈主)")],-1))]),t[29]||(t[29]=e("div",{class:"mobile-show po-top-submit"},[e("button",{class:"empty"},"发布话题")],-1))]),t[30]||(t[30]=e("div",{class:"circle-admin-info",style:{}},[e("div",null,[e("div",{class:"top-card"},[e("span",{class:""},"所有圈子(3)")]),e("i",{class:"b2font b2-donut-chart-fill"})]),e("span",{class:"mobile-show close-admin-box"},[e("i",{class:"b2font b2-close-line"})])],-1))]),t[36]||(t[36]=e("p",{class:"circle-desc tip-radius"}," 公共区域，请文明发言! ",-1)),z.value?(u(),v("div",vo,[e("div",{class:"commenter-container",ref_key:"commenterRef",ref:_t},[e("div",{class:W(["commenter-wrapper",{"commenter-focused":$(ce)}]),onClick:t[9]||(t[9]=(...i)=>$(ue)&&$(ue)(...i))},[e("div",{id:"rich-input",ref_key:"richInputRef",ref:Fe,class:"rich-input",tabindex:"-3",contenteditable:"true","data-placeholder":$(gt),onFocus:t[3]||(t[3]=i=>ce.value=!0),onBlur:t[4]||(t[4]=i=>$(ce)?$(ue)():""),onInput:t[5]||(t[5]=(...i)=>$(He)&&$(He)(...i)),onPaste:xt},null,40,ho),t[33]||(t[33]=e("div",{class:"commenter-upload"},null,-1)),e("div",{style:{display:"flex","flex-direction":"row","flex-wrap":"wrap","align-content":"flex-start","justify-content":"center","align-items":"flex-start"},class:"commenter-footer flex items-center justify-between px-3 pb-3 pt-2",onClick:t[8]||(t[8]=(...i)=>$(ge)&&$(ge)(...i))},[e("div",{class:"flex items-center gap-x-5",onClick:t[7]||(t[7]=ot(()=>{},["stop"]))},[b(ve,{onShow:$(ge),onAppend:t[6]||(t[6]=i=>{$(bt)(i),de.value+=1})},null,8,["onShow"])]),e("div",fo,[b(c,{class:"!text-base",type:"primary",onClick:kt},{default:L(()=>t[32]||(t[32]=[R(" 发送 ")])),_:1}),e("div",{class:W(["text-xs",[$(de)>=1e3?"text-error":"text-[#666]"]]),style:{padding:"6px"}},T($(de))+" / 1000 ",3)])])],2)],512),t[34]||(t[34]=e("div",{class:"PutContent"},[e("div",{class:"leftMenu"})],-1)),t[35]||(t[35]=e("div",{style:{padding:"30px","margin-left":"56px"}},null,-1))])):(u(),v("div",po,t[31]||(t[31]=[e("div",{class:"nologintext"},[e("h5",null,"您还未登录")],-1),e("div",{class:"nologintext"},[e("p",{class:"circle-desc"}," 登录后可阅读更多话题 ")],-1)])))]),t[37]||(t[37]=e("div",{id:"show-form",class:"po-form-box"},[e("div",{class:"po-form-box-in",style:{opacity:"1"}})],-1))])])]),e("div",mo,[e("ul",_o,[e("li",go,[b(y,{type:$(w).isFilterType("all")?"primary":"",round:"",onClick:t[10]||(t[10]=i=>te("all"))},{default:L(()=>t[38]||(t[38]=[R(" 全部 ")])),_:1},8,["type"])]),e("li",wo,[b(y,{type:$(w).isFilterType("recent")?"primary":"",round:"",onClick:t[11]||(t[11]=i=>te("recent"))},{default:L(()=>t[39]||(t[39]=[R(" 最近 ")])),_:1},8,["type"])]),e("li",yo,[b(y,{type:$(w).isFilterType("hot")?"primary":"",round:"",onClick:t[12]||(t[12]=i=>te("hot"))},{default:L(()=>t[40]||(t[40]=[R(" 热门 ")])),_:1},8,["type"])])]),t[41]||(t[41]=e("div",{class:"topic-drop"},[e("button",{class:"planettext"},[e("i",{class:"el-icon-lollipop"}),e("span",null,"筛选")])],-1))]),(u(!0),v(Z,null,ee(Q.value,i=>(u(),v("div",{key:i.id,class:"circle-contenr-out white"},[e("div",bo,[e("div",ko,[e("div",xo,[b(n,{to:"/otheruserinfo/"+i.userid},{default:L(()=>[e("div",Co,[b(a,{src:i.authorImg},null,8,["src"])])]),_:2},1032,["to"]),e("div",To,[e("div",null,[b(n,{to:"/otheruserinfo/"+i.userid},{default:L(()=>[e("div",$o,[e("a",So,[e("b",null,T(i.author),1)])])]),_:2},1032,["to"]),t[42]||(t[42]=e("div",{class:"topic-user-lv"},null,-1))])])])]),e("div",Lo,[e("span",Eo,[e("a",Io,[t[43]||(t[43]=e("b",{class:"circle-hash"},[e("svg",{width:"16",height:"16",viewBox:"0 0 36 36"},[e("g",{"fill-rule":"evenodd"},[e("path",{d:"M18 0c9.941 0 18 8.059 18 18 0 2.723-.604 5.304-1.687 7.617v6.445a2.25 2.25 0 0 1-2.096 2.245l-.154.005-6.446.001A17.932 17.932 0 0 1 18 36C8.059 36 0 27.941 0 18S8.059 0 18 0z","fill-opacity":".1"}),e("path",{d:"M23.32 7.875c.517 0 .948.18 1.293.54.296.294.444.632.444 1.015a.589.589 0 0 1-.037.202l-.258 2.17c0 .18.087.27.259.27h.96c.592 0 1.097.185 1.516.557.419.372.628.828.628 1.369 0 .54-.21 1.003-.628 1.386a2.166 2.166 0 0 1-1.515.574h-1.478c-.197 0-.308.09-.333.27l-.517 3.684c-.025.158.049.237.221.237h1.22c.591 0 1.096.191 1.515.574.419.384.628.845.628 1.386 0 .54-.21 1.003-.628 1.386a2.166 2.166 0 0 1-1.515.574h-1.7c-.172 0-.27.08-.296.237l-.273 2.062c-.05.495-.283.912-.702 1.25a2.282 2.282 0 0 1-1.478.507c-.518 0-.949-.18-1.294-.54-.295-.294-.443-.632-.443-1.015 0-.067.012-.135.037-.202l.236-2.062c.025-.158-.049-.237-.221-.237h-3.732c-.198 0-.296.08-.296.237l-.31 2.062a1.96 1.96 0 0 1-.721 1.25c-.407.338-.88.507-1.423.507-.517 0-.948-.18-1.293-.54-.296-.294-.444-.632-.444-1.015v-.202l.274-2.062c.025-.158-.062-.237-.259-.237h-.739a2.166 2.166 0 0 1-1.515-.574c-.419-.383-.628-.845-.628-1.386 0-.54.21-1.002.628-1.386a2.166 2.166 0 0 1 1.515-.574h1.257c.172 0 .27-.079.295-.237l.48-3.684c.025-.18-.06-.27-.258-.27h-.924a2.166 2.166 0 0 1-1.515-.574c-.419-.383-.628-.84-.628-1.37 0-.529.21-.985.628-1.368a2.166 2.166 0 0 1 1.515-.575h1.515c.197 0 .308-.09.333-.27L13.01 9.6c.074-.474.314-.88.72-1.217.407-.338.881-.507 1.423-.507.518 0 .949.18 1.294.54.27.294.406.62.406.98v.237l-.294 2.17c-.025.18.061.27.259.27h3.769c.172 0 .27-.09.295-.27l.295-2.203c.074-.474.314-.88.72-1.217.407-.338.881-.507 1.423-.507zm-3.316 7.875h-3.49c-.157 0-.256.071-.296.213l-.014.077-.45 3.956c-.02.145.029.228.144.249l.064.005h3.524c.134 0 .22-.059.26-.176l.016-.078.484-3.956c.02-.166-.037-.26-.17-.284l-.072-.006z","fill-rule":"nonzero"})])])],-1)),e("b",null,T(i.sortName),1)])])])]),e("div",jo,[e("div",{innerHTML:E(i.content),class:"topic-content-text"},null,8,Ao)]),i.image!==null&&i.image!=""?(u(),v("div",Mo,[(u(!0),v(Z,null,ee(i.image,d=>(u(),v("div",{class:"topic-img-inner",key:d.id},[b(B,{style:{"margin-right":"10px","max-width":"400px",height:"200px"},src:d.url,fit:"scale-down"},{default:L(()=>[R(T(d.url),1)]),_:2},1032,["src"])]))),128))])):Y("",!0),e("div",No,[e("div",Po,[i.isLike?(u(),v("button",{key:1,onClick:d=>Ve(i),class:"planettext like-btn active-like"},[t[45]||(t[45]=e("i",{class:"el-icon-caret-top"},null,-1)),e("span",Fo,T(i.loveNum>0?i.loveNum+"赞":"赞"),1)],8,qo)):(u(),v("button",{key:0,onClick:d=>Ve(i),class:"planettext like-btn"},[t[44]||(t[44]=e("i",{class:"el-icon-caret-top"},null,-1)),e("span",Uo,T(i.loveNum>0?i.loveNum+"赞":"赞"),1)],8,Ro)),i.isLose?(u(),v("button",{key:3,class:"planettext dislike-btn active-dislike",onClick:d=>We(i)},t[47]||(t[47]=[e("img",{class:"link-icon--right",src:Ye},null,-1),e("span",null,"踩",-1)]),8,Do)):(u(),v("button",{key:2,class:"planettext dislike-btn",onClick:d=>We(i)},t[46]||(t[46]=[e("img",{class:"link-icon--right",src:Ye},null,-1),e("span",null,"踩",-1)]),8,Ho)),e("span",Bo,[e("b",null,[e("time",Oo,[e("span",{textContent:T(ye(i.addTime))},null,8,zo)])])]),e("div",Qo,[b(K,{placement:"bottom-start",title:"分享与更多",width:280,trigger:"hover","popper-class":"share-popover"},{reference:L(()=>t[48]||(t[48]=[e("button",{class:"topic-date topic-meta-more"},[e("div",null,"更多")],-1)])),default:L(()=>[e("div",Vo,[t[53]||(t[53]=e("div",{class:"share-title"},[e("i",{class:"el-icon-share"}),e("span",null,"分享动态")],-1)),e("div",Wo,[e("div",Go,[e("button",{onClick:d=>Et(i),class:"share-btn qq-btn",title:"分享到QQ"},t[49]||(t[49]=[e("div",{class:"share-icon qq-icon"},"QQ",-1),e("span",null,"QQ",-1)]),8,Jo),e("button",{onClick:d=>It(i),class:"share-btn weibo-btn",title:"分享到微博"},t[50]||(t[50]=[e("div",{class:"share-icon weibo-icon"},"微博",-1),e("span",null,"微博",-1)]),8,Xo),e("button",{onClick:d=>jt(i),class:"share-btn wechat-btn",title:"分享到微信"},t[51]||(t[51]=[e("div",{class:"share-icon wechat-icon"},"微信",-1),e("span",null,"微信",-1)]),8,Ko),e("button",{onClick:d=>At(i),class:"share-btn copy-btn",title:"复制链接"},t[52]||(t[52]=[e("div",{class:"share-icon copy-icon"},"链接",-1),e("span",null,"复制",-1)]),8,Yo)])]),t[54]||(t[54]=e("div",{class:"more-actions"},[e("div",{class:"action-divider"}),e("button",{class:"action-btn report-btn"},[e("i",{class:"el-icon-warning"}),e("span",null,"举报")]),e("button",{class:"action-btn collect-btn"},[e("i",{class:"el-icon-star-off"}),e("span",null,"收藏")])],-1))])]),_:2},1024)])]),e("div",Zo,[i.isShow?Y("",!0):(u(),Pe(y,{key:0,icon:"el-icon-caret-bottom",onClick:d=>Qe(i),size:"small",plain:""},{default:L(()=>[e("span",null,[e("b",null,T(i.commentNum),1),t[55]||(t[55]=R("条讨论"))])]),_:2},1032,["onClick"])),i.isShow?(u(),Pe(y,{key:1,icon:"el-icon-caret-top",onClick:d=>Qe(i),size:"small",plain:""},{default:L(()=>t[56]||(t[56]=[e("span",null,"收起评论",-1)])),_:2},1032,["onClick"])):Y("",!0)])]),Ae(e("div",null,[e("div",en,[e("div",tn,[e("div",sn,[e("div",{class:"rich-input reply-rich-input",id:`reply-input-${i.id}`,contenteditable:"true","data-placeholder":"写评论",onInput:t[13]||(t[13]=d=>Se(d,"postReplyForm")),onFocus:t[14]||(t[14]=d=>Ee(d)),onBlur:t[15]||(t[15]=d=>Ie(d))},null,40,on),e("div",nn,[e("div",ln,[b(ve,{onAppend:d=>Le(d,`reply-input-${i.id}`)},null,8,["onAppend"])]),e("div",an,[b(y,{size:"small",class:"replyBut",type:"success",round:"",onClick:d=>Rt(i)},{default:L(()=>t[57]||(t[57]=[R("发布")])),_:2},1032,["onClick"])])])])])]),e("div",rn,[e("div",cn,[e("div",dn,[e("div",un,T(i.commentNum)+" 条评论 ",1)])]),e("div",null,[!I.value||I.value.length===0?(u(),v("div",pn,t[58]||(t[58]=[e("p",null,"暂无评论，我来发表第一篇评论！",-1)]))):(u(),v("div",vn,[(u(!0),v(Z,null,ee(I.value,(d,Ft)=>(u(),v("div",{class:"comments",key:Ft},[d?(u(),v("div",hn,[e("div",fn,[e("div",mn,[e("div",_n,[e("div",gn,[b(a,{src:d.profile},null,8,["src"])]),e("div",wn,[e("div",null,[e("div",yn,[e("a",bn,[e("b",null,T(d.reviewers),1)])])])])])])]),e("div",kn,[e("div",{innerHTML:E(d.content),class:"topic-content-text"},null,8,xn)]),e("div",Cn,[e("div",Tn,[e("span",$n,[e("b",null,[e("time",Sn,[e("span",{textContent:T(ye(d.addTime))},null,8,Ln)])])])]),e("div",En,[e("span",{onClick:f=>Mt(d),class:"comment-reply"},t[59]||(t[59]=[e("i",{class:"iconfont icon-comment"},null,-1),e("b",null,[e("span",null,"回复")],-1)]),8,In),e("div",null,[d.isLike?(u(),v("span",{key:1,onClick:f=>Oe(d),class:"like active"},[t[61]||(t[61]=e("i",{class:"iconfont icon-like"},null,-1)),e("span",Nn,T(d.loveNum>0?d.loveNum+"人赞":"赞"),1)],8,Mn)):(u(),v("span",{key:0,onClick:f=>Oe(d),class:"like"},[t[60]||(t[60]=e("i",{class:"iconfont icon-like"},null,-1)),e("span",An,T(d.loveNum>0?d.loveNum+"人赞":"赞"),1)],8,jn))])])]),Ae(e("div",Pn,[e("div",Rn,[e("div",Un,[e("div",{class:"rich-input reply-rich-input",id:`replys-input-${d.id}`,contenteditable:"true","data-placeholder":"请输入内容",onInput:t[16]||(t[16]=f=>Se(f,"postReplysForm")),onFocus:t[17]||(t[17]=f=>Ee(f)),onBlur:t[18]||(t[18]=f=>Ie(f))},null,40,qn),e("div",Fn,[e("div",Hn,[b(ve,{onAppend:f=>Le(f,`replys-input-${d.id}`)},null,8,["onAppend"])]),e("div",Dn,[b(y,{size:"small",class:"replyBut",type:"success",round:"",onClick:f=>Ut(d.responderId,d.id,d.postId)},{default:L(()=>t[62]||(t[62]=[R("发布")])),_:2},1032,["onClick"])])])])])],512),[[Me,d.isShow]]),d.reply&&d.reply.length>0?(u(),v("div",Bn,[(u(!0),v(Z,null,ee(d.reply,f=>(u(),v("div",{class:"reply",key:f.id},[e("div",On,[e("div",zn,[e("div",Qn,[e("div",Vn,[b(a,{src:f.profile},null,8,["src"])]),e("div",Wn,[e("div",null,[f.toUserId&&f.toUserId!==0&&f.toUserName?(u(),v("div",Gn,[e("a",Jn,[e("b",null,[R(T(f.reviewers)+T(" ")+" ",1),t[63]||(t[63]=e("i",{class:"el-icon-caret-right",style:{"font-size":"12px","font-weight":"500"}},null,-1)),R("回复"+T(" ")+T(f.toUserName),1)])])])):(u(),v("div",Xn,[e("a",Kn,[e("b",null,T(f.reviewers),1)])]))])])])])]),e("div",Yn,[e("div",{innerHTML:E(f.content),class:"topic-content-text"},null,8,Zn)]),e("div",el,[e("div",tl,[e("span",sl,[e("b",null,[e("time",ol,[e("span",{textContent:T(ye(f.addTime))},null,8,nl)])])])]),e("div",ll,[e("span",{onClick:H=>Nt(f),class:"comment-reply"},t[64]||(t[64]=[e("i",{class:"iconfont icon-comment"},null,-1),e("b",null,[e("span",null,"回复")],-1)]),8,il),e("div",null,[f.isLike?(u(),v("span",{key:1,onClick:H=>Ge(f),class:"like active"},[t[66]||(t[66]=e("i",{class:"iconfont icon-like"},null,-1)),e("span",dl,T(f.loveNum>0?f.loveNum+"人赞":"赞"),1)],8,cl)):(u(),v("span",{key:0,onClick:H=>Ge(f),class:"like"},[t[65]||(t[65]=e("i",{class:"iconfont icon-like"},null,-1)),e("span",rl,T(f.loveNum>0?f.loveNum+"人赞":"赞"),1)],8,al))])])]),Ae(e("div",ul,[e("div",pl,[e("div",vl,[e("div",{class:"rich-input reply-rich-input",id:`replysToUser-input-${f.id}`,contenteditable:"true","data-placeholder":"请输入内容",onInput:t[19]||(t[19]=H=>Se(H,"postReplysToUserForm")),onFocus:t[20]||(t[20]=H=>Ee(H)),onBlur:t[21]||(t[21]=H=>Ie(H))},null,40,hl),e("div",fl,[e("div",ml,[b(ve,{onAppend:H=>Le(H,`replysToUser-input-${f.id}`)},null,8,["onAppend"])]),e("div",_l,[b(y,{size:"small",class:"replyBut",type:"success",round:"",onClick:H=>qt(f.responderId,d.id,f.postId,f.userId)},{default:L(()=>t[67]||(t[67]=[R("发布")])),_:2},1032,["onClick"])])])])])],512),[[Me,f.isShow]])]))),128))])):Y("",!0),t[68]||(t[68]=e("div",null,null,-1))])):Y("",!0)]))),128))]))])])],512),[[Me,i.isShow]])]))),128))]),_:1}),b(l,{width:"260px"},{default:L(()=>[e("section",gl,[e("div",wl,[e("div",yl,[e("div",bl,[e("div",kl,[e("div",null,[e("div",xl,[t[69]||(t[69]=e("div",{class:"tools"},[e("div",{class:"circle"},[e("span",{class:"red box1"})]),e("div",{class:"circle"},[e("span",{class:"yellow box1"})]),e("div",{class:"circle"},[e("span",{class:"green box1"})])],-1)),e("p",Cl,T(me.value),1)]),t[70]||(t[70]=e("div",null,[e("div",{class:"oauth-login-button"},[e("a",{href:"",class:"login-weixin"},"微信登录"),e("a",{href:"",class:"login-weibo"},"Github登录"),e("a",{href:"https://graph.qq.com/oauth2.0/authorize?client_id=101057247&state=6b96c86f14fab2f3ce7af8fc5d72c943&response_type=code&redirect_uri=https%3A%2F%2F7b2.com%2Fopen%3Ftype%3Dqq",class:"login-qq"},"qq登录")])],-1))]),e("div",Tl,[e("div",null,[e("ul",$l,[(u(!0),v(Z,null,ee(S.value,i=>(u(),v("div",{key:i.id},[e("li",Sl,[e("b",null,T(i.title)+":",1),e("span",Ll,T(i.content),1)])]))),128))])])])]),e("div",El,[b(je,{to:"/Notification/system",class:"allad",target:"_blank"},{default:L(()=>t[71]||(t[71]=[R("全部公告")])),_:1})])])])])])]),_:1})])]),t[72]||(t[72]=e("div",{class:"clearfix pt-8"},null,-1))])])]),U.value?(u(),v("div",Il,t[73]||(t[73]=[e("div",{class:"loader"},null,-1)]))):(u(),v("div",jl,t[74]||(t[74]=[e("div",{class:"loading-indicator"},"我是有底线的",-1)]))),t[75]||(t[75]=e("div",{infos:"0"},[e("div",{class:"adBanner pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links"})],-1))])]),ke.value?(u(),v("div",{key:0,class:"help-modal-overlay",onClick:$e},[e("div",{class:"help-modal",onClick:t[22]||(t[22]=ot(()=>{},["stop"]))},[e("div",Al,[e("h2",null,T(xe.value),1),e("button",{class:"help-modal-close",onClick:$e},t[76]||(t[76]=[e("i",{class:"el-icon-close"},null,-1)]))]),e("div",Ml,[e("div",{innerHTML:Ce.value},null,8,Nl)]),e("div",{class:"help-modal-footer"},[e("button",{class:"help-modal-btn",onClick:$e},"我知道了")])])])):Y("",!0)])}}}),ni=at(Pl,[["__scopeId","data-v-24984097"]]);export{ni as default};
