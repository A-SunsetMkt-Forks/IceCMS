import{E as M}from"./CQdKq0Vt.js";import{E as I}from"./g0zu4MNc.js";import{_ as O,E as V,r as d,I as E,k as N,a6 as p,c as t,o as a,a as e,F as g,f,p as w,t as r,q as _,b as k,R as U,h as B,g as K,e as z,af as D}from"./C_uFub58.js";import"./BM-sVEEH.js";const F={class:"chat-container"},H={class:"chat-sidebar"},L={class:"chat-list"},R=["onClick"],S={class:"user-avatar"},$=["src","alt"],q={class:"user-info"},j={class:"user-name"},A={class:"last-message"},G={class:"message-time"},J={class:"chat-main"},P={key:0,class:"chat-header"},Q={class:"user-avatar"},W=["src","alt"],X={class:"user-name"},Y={key:0,class:"message-avatar"},Z=["src","alt"],ee={class:"message-content"},se={class:"message-text"},te={class:"message-time"},ae={key:1,class:"message-avatar"},ie=["src"],ne={class:"chat-input"},oe={class:"input-box"},le={class:"input-actions"},ce={__name:"[id]",setup(de){const y=V(),i=d(null),u=d(parseInt(y.params.id)),o=d(""),m=d([{id:1,name:"张三",avatar:"/api/placeholder/40/40",lastMessage:"你好，最近怎么样？",lastTime:"10:30"},{id:2,name:"李四",avatar:"/api/placeholder/40/40",lastMessage:"明天见面聊吧",lastTime:"09:15"},{id:3,name:"王五",avatar:"/api/placeholder/40/40",lastMessage:"谢谢你的帮助",lastTime:"昨天"}]),v=d([{id:1,content:"你好！",time:"10:25",isOwn:!1},{id:2,content:"你好，有什么可以帮助你的吗？",time:"10:26",isOwn:!0},{id:3,content:"我想了解一下产品情况",time:"10:28",isOwn:!1}]),T=d({avatar:"/api/placeholder/40/40"}),l=E(()=>m.value.find(n=>n.id===u.value)),b=n=>{u.value=n,D(`/userInfo/chat/${n}`)},h=()=>{if(!o.value.trim())return;const n={id:v.value.length+1,content:o.value.trim(),time:new Date().toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}),isOwn:!0};v.value.push(n),o.value="",p(()=>{i.value&&(i.value.scrollTop=i.value.scrollHeight)})};return N(()=>{p(()=>{i.value&&(i.value.scrollTop=i.value.scrollHeight)})}),(n,c)=>{const x=M,C=I;return a(),t("div",F,[e("div",H,[c[1]||(c[1]=e("div",{class:"sidebar-header"},[e("h3",null,"私信")],-1)),e("div",L,[(a(!0),t(g,null,f(m.value,s=>(a(),t("div",{class:w(["chat-item",{active:u.value===s.id}]),key:s.id,onClick:re=>b(s.id)},[e("div",S,[e("img",{src:s.avatar,alt:s.name},null,8,$)]),e("div",q,[e("div",j,r(s.name),1),e("div",A,r(s.lastMessage),1)]),e("div",G,r(s.lastTime),1)],10,R))),128))])]),e("div",J,[l.value?(a(),t("div",P,[e("div",Q,[e("img",{src:l.value.avatar,alt:l.value.name},null,8,W)]),e("div",X,r(l.value.name),1)])):_("",!0),e("div",{class:"chat-messages",ref_key:"messagesContainer",ref:i},[(a(!0),t(g,null,f(v.value,s=>(a(),t("div",{class:w(["message-item",{"own-message":s.isOwn}]),key:s.id},[s.isOwn?_("",!0):(a(),t("div",Y,[e("img",{src:l.value?.avatar,alt:l.value?.name},null,8,Z)])),e("div",ee,[e("div",se,r(s.content),1),e("div",te,r(s.time),1)]),s.isOwn?(a(),t("div",ae,[e("img",{src:T.value?.avatar,alt:"我"},null,8,ie)])):_("",!0)],2))),128))],512),e("div",ne,[e("div",oe,[k(x,{modelValue:o.value,"onUpdate:modelValue":c[0]||(c[0]=s=>o.value=s),type:"textarea",rows:3,placeholder:"输入消息...",onKeydown:U(B(h,["prevent"]),["enter"])},null,8,["modelValue","onKeydown"])]),e("div",le,[k(C,{type:"primary",onClick:h,disabled:!o.value.trim()},{default:K(()=>c[2]||(c[2]=[z(" 发送 ")])),_:1},8,["disabled"])])])])])}}},he=O(ce,[["__scopeId","data-v-79ebbc39"]]);export{he as default};
