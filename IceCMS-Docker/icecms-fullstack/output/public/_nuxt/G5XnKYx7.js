import{E as Ke}from"./CQdKq0Vt.js";import{b as Je,E as Xe,a as Qe}from"./Bo10sX-3.js";import{E as Ze,a as xe}from"./ChnNiMOP.js";import{d as ne,E as et}from"./C8LkNO85.js";import{E as tt}from"./O5aJ7Ipg.js";import{b as oe,d as C,_ as ue,w as lt,c as Fe,a as at,e as Re,f as Me,g as X,h as Ne,m as me,u as st,i as pe,j as ot,z as nt,k as rt,l as it,E as ut}from"./g0zu4MNc.js";import{d as q,H as ae,I as N,J as Oe,L as we,c as U,o as y,q as P,p as $,u as e,a as h,n as Z,M as B,t as ie,m as z,g as o,N as dt,O as Be,P as ze,Q as O,r as j,F as te,f as le,R as Ie,h as se,b as a,S as ct,U as pt,V as ve,W as $e,D as Ee,X as ft,Y as mt,Z as vt,$ as Ce,a0 as Se,k as gt,l as ce,e as Q,_ as yt}from"./C_uFub58.js";import{t as ye,u as bt,d as ht}from"./BM-sVEEH.js";import{i as _t}from"./CxYcxH0g.js";import{a as kt,E as wt}from"./BJwtCnNB.js";import{E as $t,a as Et}from"./GprZAYzg.js";import{u as Ct}from"./CJdOkxoU.js";import"./C7dLEZkI.js";import"./BpqunBSk.js";import{E as re}from"./B1mjav-x.js";import{E as St}from"./CtkJBwaH.js";import"./dXWXmwas.js";import"./BUADUvnR.js";import"./CRxF1tn9.js";import"./BtvKXLLF.js";import"./CXVv3ulD.js";var Vt=1,Ut=4;function Ve(i){return Je(i,Vt|Ut)}const Lt=oe({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:i=>i>=0&&i<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:Boolean,duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:C(String),default:"round"},textInside:Boolean,width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:C([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:C(Function),default:i=>`${i}%`}}),Pt=q({name:"ElProgress"}),Tt=q({...Pt,props:Lt,setup(i){const t=i,n={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},d=ae("progress"),f=N(()=>{const u={width:`${t.percentage}%`,animationDuration:`${t.duration}s`},S=F(t.percentage);return S.includes("gradient")?u.background=S:u.backgroundColor=S,u}),m=N(()=>(t.strokeWidth/t.width*100).toFixed(1)),k=N(()=>["circle","dashboard"].includes(t.type)?Number.parseInt(`${50-Number.parseFloat(m.value)/2}`,10):0),T=N(()=>{const u=k.value,S=t.type==="dashboard";return`
          M 50 50
          m 0 ${S?"":"-"}${u}
          a ${u} ${u} 0 1 1 0 ${S?"-":""}${u*2}
          a ${u} ${u} 0 1 1 0 ${S?"":"-"}${u*2}
          `}),E=N(()=>2*Math.PI*k.value),D=N(()=>t.type==="dashboard"?.75:1),R=N(()=>`${-1*E.value*(1-D.value)/2}px`),_=N(()=>({strokeDasharray:`${E.value*D.value}px, ${E.value}px`,strokeDashoffset:R.value})),A=N(()=>({strokeDasharray:`${E.value*D.value*(t.percentage/100)}px, ${E.value}px`,strokeDashoffset:R.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),r=N(()=>{let u;return t.color?u=F(t.percentage):u=n[t.status]||n.default,u}),v=N(()=>t.status==="warning"?lt:t.type==="line"?t.status==="success"?Fe:at:t.status==="success"?Re:Me),l=N(()=>t.type==="line"?12+t.strokeWidth*.4:t.width*.111111+2),b=N(()=>t.format(t.percentage));function p(u){const S=100/u.length;return u.map((M,g)=>we(M)?{color:M,percentage:(g+1)*S}:M).sort((M,g)=>M.percentage-g.percentage)}const F=u=>{var S;const{color:I}=t;if(Oe(I))return I(u);if(we(I))return I;{const M=p(I);for(const g of M)if(g.percentage>u)return g.color;return(S=M[M.length-1])==null?void 0:S.color}};return(u,S)=>(y(),U("div",{class:$([e(d).b(),e(d).m(u.type),e(d).is(u.status),{[e(d).m("without-text")]:!u.showText,[e(d).m("text-inside")]:u.textInside}]),role:"progressbar","aria-valuenow":u.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[u.type==="line"?(y(),U("div",{key:0,class:$(e(d).b("bar"))},[h("div",{class:$(e(d).be("bar","outer")),style:Z({height:`${u.strokeWidth}px`})},[h("div",{class:$([e(d).be("bar","inner"),{[e(d).bem("bar","inner","indeterminate")]:u.indeterminate},{[e(d).bem("bar","inner","striped")]:u.striped},{[e(d).bem("bar","inner","striped-flow")]:u.stripedFlow}]),style:Z(e(f))},[(u.showText||u.$slots.default)&&u.textInside?(y(),U("div",{key:0,class:$(e(d).be("bar","innerText"))},[B(u.$slots,"default",{percentage:u.percentage},()=>[h("span",null,ie(e(b)),1)])],2)):P("v-if",!0)],6)],6)],2)):(y(),U("div",{key:1,class:$(e(d).b("circle")),style:Z({height:`${u.width}px`,width:`${u.width}px`})},[(y(),U("svg",{viewBox:"0 0 100 100"},[h("path",{class:$(e(d).be("circle","track")),d:e(T),stroke:`var(${e(d).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":u.strokeLinecap,"stroke-width":e(m),fill:"none",style:Z(e(_))},null,14,["d","stroke","stroke-linecap","stroke-width"]),h("path",{class:$(e(d).be("circle","path")),d:e(T),stroke:e(r),fill:"none",opacity:u.percentage?1:0,"stroke-linecap":u.strokeLinecap,"stroke-width":e(m),style:Z(e(A))},null,14,["d","stroke","opacity","stroke-linecap","stroke-width"])]))],6)),(u.showText||u.$slots.default)&&!u.textInside?(y(),U("div",{key:2,class:$(e(d).e("text")),style:Z({fontSize:`${e(l)}px`})},[B(u.$slots,"default",{percentage:u.percentage},()=>[u.status?(y(),z(e(X),{key:1},{default:o(()=>[(y(),z(dt(e(v))))]),_:1})):(y(),U("span",{key:0},ie(e(b)),1))])],6)):P("v-if",!0)],10,["aria-valuenow"]))}});var Dt=ue(Tt,[["__file","progress.vue"]]);const Ft=Ne(Dt),Ye=Symbol("uploadContextKey"),Rt="ElUpload";class Mt extends Error{constructor(t,n,d,f){super(t),this.name="UploadAjaxError",this.status=n,this.method=d,this.url=f}}function Ue(i,t,n){let d;return n.response?d=`${n.response.error||n.response}`:n.responseText?d=`${n.responseText}`:d=`fail to ${t.method} ${i} ${n.status}`,new Mt(d,n.status,t.method,i)}function Nt(i){const t=i.responseText||i.response;if(!t)return t;try{return JSON.parse(t)}catch{return t}}const Ot=i=>{typeof XMLHttpRequest>"u"&&ye(Rt,"XMLHttpRequest is undefined");const t=new XMLHttpRequest,n=i.action;t.upload&&t.upload.addEventListener("progress",m=>{const k=m;k.percent=m.total>0?m.loaded/m.total*100:0,i.onProgress(k)});const d=new FormData;if(i.data)for(const[m,k]of Object.entries(i.data))Be(k)&&k.length?d.append(m,...k):d.append(m,k);d.append(i.filename,i.file,i.file.name),t.addEventListener("error",()=>{i.onError(Ue(n,i,t))}),t.addEventListener("load",()=>{if(t.status<200||t.status>=300)return i.onError(Ue(n,i,t));i.onSuccess(Nt(t))}),t.open(i.method,n,!0),i.withCredentials&&"withCredentials"in t&&(t.withCredentials=!0);const f=i.headers||{};if(f instanceof Headers)f.forEach((m,k)=>t.setRequestHeader(k,m));else for(const[m,k]of Object.entries(f))ze(k)||t.setRequestHeader(m,String(k));return t.send(d),t},Ae=["text","picture","picture-card"];let Bt=1;const ge=()=>Date.now()+Bt++,je=oe({action:{type:String,default:"#"},headers:{type:C(Object)},method:{type:String,default:"post"},data:{type:C([Object,Function,Promise]),default:()=>me({})},multiple:Boolean,name:{type:String,default:"file"},drag:Boolean,withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},fileList:{type:C(Array),default:()=>me([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:Ae,default:"text"},httpRequest:{type:C(Function),default:Ot},disabled:Boolean,limit:Number}),zt=oe({...je,beforeUpload:{type:C(Function),default:O},beforeRemove:{type:C(Function)},onRemove:{type:C(Function),default:O},onChange:{type:C(Function),default:O},onPreview:{type:C(Function),default:O},onSuccess:{type:C(Function),default:O},onProgress:{type:C(Function),default:O},onError:{type:C(Function),default:O},onExceed:{type:C(Function),default:O},crossorigin:{type:C(String)}}),It=oe({files:{type:C(Array),default:()=>me([])},disabled:{type:Boolean,default:!1},handlePreview:{type:C(Function),default:O},listType:{type:String,values:Ae,default:"text"},crossorigin:{type:C(String)}}),Yt={remove:i=>!!i},At=q({name:"ElUploadList"}),jt=q({...At,props:It,emits:Yt,setup(i,{emit:t}){const n=i,{t:d}=st(),f=ae("upload"),m=ae("icon"),k=ae("list"),T=pe(),E=j(!1),D=N(()=>[f.b("list"),f.bm("list",n.listType),f.is("disabled",n.disabled)]),R=_=>{t("remove",_)};return(_,A)=>(y(),z(ct,{tag:"ul",class:$(e(D)),name:e(k).b()},{default:o(()=>[(y(!0),U(te,null,le(_.files,(r,v)=>(y(),U("li",{key:r.uid||r.name,class:$([e(f).be("list","item"),e(f).is(r.status),{focusing:E.value}]),tabindex:"0",onKeydown:Ie(l=>!e(T)&&R(r),["delete"]),onFocus:l=>E.value=!0,onBlur:l=>E.value=!1,onClick:l=>E.value=!1},[B(_.$slots,"default",{file:r,index:v},()=>[_.listType==="picture"||r.status!=="uploading"&&_.listType==="picture-card"?(y(),U("img",{key:0,class:$(e(f).be("list","item-thumbnail")),src:r.url,crossorigin:_.crossorigin,alt:""},null,10,["src","crossorigin"])):P("v-if",!0),r.status==="uploading"||_.listType!=="picture-card"?(y(),U("div",{key:1,class:$(e(f).be("list","item-info"))},[h("a",{class:$(e(f).be("list","item-name")),onClick:se(l=>_.handlePreview(r),["prevent"])},[a(e(X),{class:$(e(m).m("document"))},{default:o(()=>[a(e(ot))]),_:1},8,["class"]),h("span",{class:$(e(f).be("list","item-file-name")),title:r.name},ie(r.name),11,["title"])],10,["onClick"]),r.status==="uploading"?(y(),z(e(Ft),{key:0,type:_.listType==="picture-card"?"circle":"line","stroke-width":_.listType==="picture-card"?6:2,percentage:Number(r.percentage),style:Z(_.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):P("v-if",!0)],2)):P("v-if",!0),h("label",{class:$(e(f).be("list","item-status-label"))},[_.listType==="text"?(y(),z(e(X),{key:0,class:$([e(m).m("upload-success"),e(m).m("circle-check")])},{default:o(()=>[a(e(Fe))]),_:1},8,["class"])):["picture-card","picture"].includes(_.listType)?(y(),z(e(X),{key:1,class:$([e(m).m("upload-success"),e(m).m("check")])},{default:o(()=>[a(e(Re))]),_:1},8,["class"])):P("v-if",!0)],2),e(T)?P("v-if",!0):(y(),z(e(X),{key:2,class:$(e(m).m("close")),onClick:l=>R(r)},{default:o(()=>[a(e(Me))]),_:2},1032,["class","onClick"])),P(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),P(" This is a bug which needs to be fixed "),P(" TODO: Fix the incorrect navigation interaction "),e(T)?P("v-if",!0):(y(),U("i",{key:3,class:$(e(m).m("close-tip"))},ie(e(d)("el.upload.deleteTip")),3)),_.listType==="picture-card"?(y(),U("span",{key:4,class:$(e(f).be("list","item-actions"))},[h("span",{class:$(e(f).be("list","item-preview")),onClick:l=>_.handlePreview(r)},[a(e(X),{class:$(e(m).m("zoom-in"))},{default:o(()=>[a(e(nt))]),_:1},8,["class"])],10,["onClick"]),e(T)?P("v-if",!0):(y(),U("span",{key:0,class:$(e(f).be("list","item-delete")),onClick:l=>R(r)},[a(e(X),{class:$(e(m).m("delete"))},{default:o(()=>[a(e(rt))]),_:1},8,["class"])],10,["onClick"]))],2)):P("v-if",!0)])],42,["onKeydown","onFocus","onBlur","onClick"]))),128)),B(_.$slots,"append")]),_:3},8,["class","name"]))}});var Le=ue(jt,[["__file","upload-list.vue"]]);const qt=oe({disabled:{type:Boolean,default:!1}}),Ht={file:i=>Be(i)},qe="ElUploadDrag",Gt=q({name:qe}),Wt=q({...Gt,props:qt,emits:Ht,setup(i,{emit:t}){pt(Ye)||ye(qe,"usage: <el-upload><el-upload-dragger /></el-upload>");const d=ae("upload"),f=j(!1),m=pe(),k=E=>{if(m.value)return;f.value=!1,E.stopPropagation();const D=Array.from(E.dataTransfer.files);t("file",D)},T=()=>{m.value||(f.value=!0)};return(E,D)=>(y(),U("div",{class:$([e(d).b("dragger"),e(d).is("dragover",f.value)]),onDrop:se(k,["prevent"]),onDragover:se(T,["prevent"]),onDragleave:se(R=>f.value=!1,["prevent"])},[B(E.$slots,"default")],42,["onDrop","onDragover","onDragleave"]))}});var Kt=ue(Wt,[["__file","upload-dragger.vue"]]);const Jt=oe({...je,beforeUpload:{type:C(Function),default:O},onRemove:{type:C(Function),default:O},onStart:{type:C(Function),default:O},onSuccess:{type:C(Function),default:O},onProgress:{type:C(Function),default:O},onError:{type:C(Function),default:O},onExceed:{type:C(Function),default:O}}),Xt=q({name:"ElUploadContent",inheritAttrs:!1}),Qt=q({...Xt,props:Jt,setup(i,{expose:t}){const n=i,d=ae("upload"),f=pe(),m=ve({}),k=ve(),T=l=>{if(l.length===0)return;const{autoUpload:b,limit:p,fileList:F,multiple:u,onStart:S,onExceed:I}=n;if(p&&F.length+l.length>p){I(l,F);return}u||(l=l.slice(0,1));for(const M of l){const g=M;g.uid=ge(),S(g),b&&E(g)}},E=async l=>{if(k.value.value="",!n.beforeUpload)return R(l);let b,p={};try{const u=n.data,S=n.beforeUpload(l);p=$e(n.data)?Ve(n.data):n.data,b=await S,$e(n.data)&&_t(u,p)&&(p=Ve(n.data))}catch{b=!1}if(b===!1){n.onRemove(l);return}let F=l;b instanceof Blob&&(b instanceof File?F=b:F=new File([b],l.name,{type:l.type})),R(Object.assign(F,{uid:l.uid}),p)},D=async(l,b)=>Oe(l)?l(b):l,R=async(l,b)=>{const{headers:p,data:F,method:u,withCredentials:S,name:I,action:M,onProgress:g,onSuccess:s,onError:V,httpRequest:w}=n;try{b=await D(b??F,l)}catch{n.onRemove(l);return}const{uid:H}=l,G={headers:p||{},withCredentials:S,file:l,data:b,method:u,filename:I,action:M,onProgress:Y=>{g(Y,l)},onSuccess:Y=>{s(Y,l),delete m.value[H]},onError:Y=>{V(Y,l),delete m.value[H]}},W=w(G);m.value[H]=W,W instanceof Promise&&W.then(G.onSuccess,G.onError)},_=l=>{const b=l.target.files;b&&T(Array.from(b))},A=()=>{f.value||(k.value.value="",k.value.click())},r=()=>{A()};return t({abort:l=>{it(m.value).filter(l?([p])=>String(l.uid)===p:()=>!0).forEach(([p,F])=>{F instanceof XMLHttpRequest&&F.abort(),delete m.value[p]})},upload:E}),(l,b)=>(y(),U("div",{class:$([e(d).b(),e(d).m(l.listType),e(d).is("drag",l.drag),e(d).is("disabled",e(f))]),tabindex:e(f)?"-1":"0",onClick:A,onKeydown:Ie(se(r,["self"]),["enter","space"])},[l.drag?(y(),z(Kt,{key:0,disabled:e(f),onFile:T},{default:o(()=>[B(l.$slots,"default")]),_:3},8,["disabled"])):B(l.$slots,"default",{key:1}),h("input",{ref_key:"inputRef",ref:k,class:$(e(d).e("input")),name:l.name,disabled:e(f),multiple:l.multiple,accept:l.accept,type:"file",onChange:_,onClick:se(()=>{},["stop"])},null,42,["name","disabled","multiple","accept","onClick"])],42,["tabindex","onKeydown"]))}});var Pe=ue(Qt,[["__file","upload-content.vue"]]);const Te="ElUpload",De=i=>{var t;(t=i.url)!=null&&t.startsWith("blob:")&&URL.revokeObjectURL(i.url)},Zt=(i,t)=>{const n=bt(i,"fileList",void 0,{passive:!0}),d=r=>n.value.find(v=>v.uid===r.uid);function f(r){var v;(v=t.value)==null||v.abort(r)}function m(r=["ready","uploading","success","fail"]){n.value=n.value.filter(v=>!r.includes(v.status))}function k(r){n.value=n.value.filter(v=>v.uid!==r.uid)}const T=(r,v)=>{const l=d(v);l&&(console.error(r),l.status="fail",k(l),i.onError(r,l,n.value),i.onChange(l,n.value))},E=(r,v)=>{const l=d(v);l&&(i.onProgress(r,l,n.value),l.status="uploading",l.percentage=Math.round(r.percent))},D=(r,v)=>{const l=d(v);l&&(l.status="success",l.response=r,i.onSuccess(r,l,n.value),i.onChange(l,n.value))},R=r=>{ze(r.uid)&&(r.uid=ge());const v={name:r.name,percentage:0,status:"ready",size:r.size,raw:r,uid:r.uid};if(i.listType==="picture-card"||i.listType==="picture")try{v.url=URL.createObjectURL(r)}catch(l){ht(Te,l.message),i.onError(l,v,n.value)}n.value=[...n.value,v],i.onChange(v,n.value)},_=async r=>{const v=r instanceof File?d(r):r;v||ye(Te,"file to be removed not found");const l=b=>{f(b),k(b),i.onRemove(b,n.value),De(b)};i.beforeRemove?await i.beforeRemove(v,n.value)!==!1&&l(v):l(v)};function A(){n.value.filter(({status:r})=>r==="ready").forEach(({raw:r})=>{var v;return r&&((v=t.value)==null?void 0:v.upload(r))})}return Ee(()=>i.listType,r=>{r!=="picture-card"&&r!=="picture"||(n.value=n.value.map(v=>{const{raw:l,url:b}=v;if(!b&&l)try{v.url=URL.createObjectURL(l)}catch(p){i.onError(p,v,n.value)}return v}))}),Ee(n,r=>{for(const v of r)v.uid||(v.uid=ge()),v.status||(v.status="success")},{immediate:!0,deep:!0}),{uploadFiles:n,abort:f,clearFiles:m,handleError:T,handleProgress:E,handleStart:R,handleSuccess:D,handleRemove:_,submit:A,revokeFileObjectURL:De}},xt=q({name:"ElUpload"}),el=q({...xt,props:zt,setup(i,{expose:t}){const n=i,d=pe(),f=ve(),{abort:m,submit:k,clearFiles:T,uploadFiles:E,handleStart:D,handleError:R,handleRemove:_,handleSuccess:A,handleProgress:r,revokeFileObjectURL:v}=Zt(n,f),l=N(()=>n.listType==="picture-card"),b=N(()=>({...n,fileList:E.value,onStart:D,onProgress:r,onSuccess:A,onError:R,onRemove:_}));return ft(()=>{E.value.forEach(v)}),mt(Ye,{accept:vt(n,"accept")}),t({abort:m,submit:k,clearFiles:T,handleStart:D,handleRemove:_}),(p,F)=>(y(),U("div",null,[e(l)&&p.showFileList?(y(),z(Le,{key:0,disabled:e(d),"list-type":p.listType,files:e(E),crossorigin:p.crossorigin,"handle-preview":p.onPreview,onRemove:e(_)},Ce({append:o(()=>[a(Pe,Se({ref_key:"uploadRef",ref:f},e(b)),{default:o(()=>[p.$slots.trigger?B(p.$slots,"trigger",{key:0}):P("v-if",!0),!p.$slots.trigger&&p.$slots.default?B(p.$slots,"default",{key:1}):P("v-if",!0)]),_:3},16)]),_:2},[p.$slots.file?{name:"default",fn:o(({file:u,index:S})=>[B(p.$slots,"file",{file:u,index:S})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):P("v-if",!0),!e(l)||e(l)&&!p.showFileList?(y(),z(Pe,Se({key:1,ref_key:"uploadRef",ref:f},e(b)),{default:o(()=>[p.$slots.trigger?B(p.$slots,"trigger",{key:0}):P("v-if",!0),!p.$slots.trigger&&p.$slots.default?B(p.$slots,"default",{key:1}):P("v-if",!0)]),_:3},16)):P("v-if",!0),p.$slots.trigger?B(p.$slots,"default",{key:2}):P("v-if",!0),B(p.$slots,"tip"),!e(l)&&p.showFileList?(y(),z(Le,{key:3,disabled:e(d),"list-type":p.listType,files:e(E),crossorigin:p.crossorigin,"handle-preview":p.onPreview,onRemove:e(_)},Ce({_:2},[p.$slots.file?{name:"default",fn:o(({file:u,index:S})=>[B(p.$slots,"file",{file:u,index:S})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):P("v-if",!0)]))}});var tl=ue(el,[["__file","upload.vue"]]);const ll=Ne(tl),al={class:"resource-publish-container home"},sl=["src"],ol={class:"el-upload-list__item-actions"},nl=["onClick"],rl=["onClick"],il=["src"],ul={class:"el-upload-list__item-actions"},dl=["onClick"],cl=["onClick"],pl={class:"section-header"},fl={class:"version-header"},ml={class:"version-label"},vl={class:"form-actions"},gl=q({name:"ResourcePublish",__name:"star",setup(i){Ct();const t=j({title:"",publishTime:"",summary:"",content:"",category:"",tags:[],paymentType:0,resourcePassword:""}),n=j([{id:Date.now().toString(),version:"",language:"简体中文",system:"All",updateTime:ne().format("YYYY-MM-DD"),size:"",downloadLink:"",description:""}]),d=j([]),f=j([]),m=j([]),k=j([{id:1,name:"软件工具"},{id:2,name:"设计素材"},{id:3,name:"教程资料"},{id:4,name:"源码分享"},{id:5,name:"其他资源"}]),T=j([{id:1,tagName:"Vue"},{id:2,tagName:"React"},{id:3,tagName:"Node.js"},{id:4,tagName:"TypeScript"},{id:5,tagName:"JavaScript"},{id:6,tagName:"CSS"},{id:7,tagName:"HTML"},{id:8,tagName:"Python"}]),E=[{label:"All",value:"All"},{label:"Windows",value:"Windows"},{label:"macOS",value:"macOS"},{label:"Linux",value:"Linux"},{label:"iOS",value:"iOS"},{label:"Android",value:"Android"}],D=[{label:"简体中文",value:"简体中文"},{label:"English",value:"English"},{label:"繁體中文",value:"繁體中文"},{label:"日本語",value:"日本語"},{label:"한국어",value:"한국어"}],R=j({title:[{required:!0,message:"请输入资源标题",trigger:"blur"}],category:[{required:!0,message:"请选择资源分类",trigger:"change"}],summary:[{required:!0,message:"请输入资源简介",trigger:"blur"}],content:[{required:!0,message:"请输入资源内容",trigger:"blur"}]}),_=j(null),A=()=>{n.value.push({id:Date.now().toString(),version:"",language:"简体中文",system:"All",updateTime:ne().format("YYYY-MM-DD"),size:"",downloadLink:"",description:""})},r=g=>{n.value.length>1&&n.value.splice(g,1)},v=(g,s)=>{if(console.log("Upload success:",g,s),g&&g.url){const V=d.value.findIndex(w=>w.uid===s.uid);V!==-1&&(d.value[V].url=g.url)}},l=(g,s)=>{if(console.log("Carousel upload success:",g,s),g&&g.url){const V=f.value.findIndex(w=>w.uid===s.uid);V!==-1&&(f.value[V].url=g.url)}},b=(g,s)=>{if(console.log("Video upload success:",g,s),g&&g.url){const V=m.value.findIndex(w=>w.uid===s.uid);V!==-1&&(m.value[V].url=g.url)}},p=g=>["image/jpeg","image/png","image/gif"].includes(g.type)?g.size/1024/1024<2?!0:(re.error("图片大小不能超过 2MB!"),!1):(re.error("只能上传 JPG/PNG/GIF 格式的图片!"),!1),F=g=>{const s=["mp4","mov","avi","mkv","wmv","flv","mpeg"],V=g.name.split(".").pop().toLowerCase();return s.includes(V)?g.size/1024/1024<50?!0:(re.error("视频大小不能超过 50MB!"),!1):(re.error("请上传有效的视频文件格式!"),!1)},u=()=>{_.value?.validate(g=>{if(g){const s={...t.value};s.publishTime&&(s.publishTime=ne(s.publishTime).format("YYYY-MM-DD HH:mm:ss"));const V=d.value.length>0?d.value[0].url:"",w=f.value.map(K=>({url:K.url})),H=m.value.length>0?m.value[0].url:"",G=t.value.tags.join(","),W=JSON.stringify({versions:n.value.filter(K=>K.downloadLink&&K.version)}),Y={title:s.title,sortClass:s.category,content:s.content,intro:s.summary,createTime:s.publishTime||ne().format("YYYY-MM-DD HH:mm:ss"),thumb:V,keyword:G,isFree:s.paymentType,resAddress:W,resPassword:s.resourcePassword,videoAddress:H,carousel:JSON.stringify(w)};console.log("提交数据:",Y),St({title:"成功",message:"资源发布成功（演示）",type:"success"})}else re.error("请完善表单信息")})},S=()=>{_.value?.resetFields(),d.value=[],f.value=[],m.value=[],n.value=[{id:Date.now().toString(),version:"",language:"简体中文",system:"All",updateTime:ne().format("YYYY-MM-DD"),size:"",downloadLink:"",description:""}]},I=g=>{console.log("Preview:",g)},M=g=>{console.log("Remove:",g)};return gt(()=>{}),(g,s)=>{const V=Ke,w=Xe,H=xe,G=Ze,W=et,Y=tt,K=ce("Plus"),J=X,be=ce("zoom-in"),he=ce("Delete"),fe=ll,He=ce("upload-filled"),de=ut,x=wt,_e=kt,ke=Et,Ge=$t,We=Qe;return y(),U("div",al,[s[26]||(s[26]=h("div",{class:"header"},[h("h2",null,"发布资源"),h("p",{class:"subtitle"},"分享您的优质内容给其他用户")],-1)),a(We,{ref_key:"formRef",ref:_,model:t.value,rules:R.value,"label-width":"100px",class:"publish-form"},{default:o(()=>[a(Y,{class:"form-section",shadow:"never"},{header:o(()=>s[11]||(s[11]=[h("span",{class:"section-title"},"基本信息",-1)])),default:o(()=>[a(w,{label:"资源标题",prop:"title"},{default:o(()=>[a(V,{modelValue:t.value.title,"onUpdate:modelValue":s[0]||(s[0]=c=>t.value.title=c),placeholder:"请输入资源标题",maxlength:"100","show-word-limit":""},null,8,["modelValue"])]),_:1}),a(w,{label:"资源分类",prop:"category"},{default:o(()=>[a(G,{modelValue:t.value.category,"onUpdate:modelValue":s[1]||(s[1]=c=>t.value.category=c),placeholder:"请选择资源分类",style:{width:"100%"}},{default:o(()=>[(y(!0),U(te,null,le(k.value,c=>(y(),z(H,{key:c.id,label:c.name,value:c.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(w,{label:"资源标签"},{default:o(()=>[a(G,{modelValue:t.value.tags,"onUpdate:modelValue":s[2]||(s[2]=c=>t.value.tags=c),multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择或输入标签",style:{width:"100%"}},{default:o(()=>[(y(!0),U(te,null,le(T.value,c=>(y(),z(H,{key:c.id,label:c.tagName,value:c.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(w,{label:"发布时间"},{default:o(()=>[a(W,{modelValue:t.value.publishTime,"onUpdate:modelValue":s[3]||(s[3]=c=>t.value.publishTime=c),type:"datetime",placeholder:"选择发布时间（默认为当前时间）",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),a(w,{label:"资源简介",prop:"summary"},{default:o(()=>[a(V,{modelValue:t.value.summary,"onUpdate:modelValue":s[4]||(s[4]=c=>t.value.summary=c),type:"textarea",rows:4,placeholder:"请输入资源简介，建议150字以内",maxlength:"300","show-word-limit":""},null,8,["modelValue"])]),_:1}),a(w,{label:"详细内容",prop:"content"},{default:o(()=>[a(V,{modelValue:t.value.content,"onUpdate:modelValue":s[5]||(s[5]=c=>t.value.content=c),type:"textarea",rows:8,placeholder:"请详细描述您的资源内容、使用方法、注意事项等",maxlength:"2000","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1}),a(Y,{class:"form-section",shadow:"never"},{header:o(()=>s[12]||(s[12]=[h("span",{class:"section-title"},"媒体文件",-1)])),default:o(()=>[a(w,{label:"封面图片"},{default:o(()=>[a(fe,{"file-list":d.value,"onUpdate:fileList":s[6]||(s[6]=c=>d.value=c),action:"/api/upload/image","list-type":"picture-card",limit:1,"before-upload":p,"on-success":v,accept:"image/*"},{file:o(({file:c})=>[h("div",null,[h("img",{class:"el-upload-list__item-thumbnail",src:c.url,alt:""},null,8,sl),h("span",ol,[h("span",{class:"el-upload-list__item-preview",onClick:ee=>I(c)},[a(J,null,{default:o(()=>[a(be)]),_:1})],8,nl),h("span",{class:"el-upload-list__item-delete",onClick:ee=>M(c)},[a(J,null,{default:o(()=>[a(he)]),_:1})],8,rl)])])]),default:o(()=>[a(J,null,{default:o(()=>[a(K)]),_:1})]),_:1},8,["file-list"]),s[13]||(s[13]=h("div",{class:"upload-tip"},"建议上传 16:9 比例的图片，支持 JPG、PNG、GIF 格式，大小不超过 2MB",-1))]),_:1}),a(w,{label:"轮播图片"},{default:o(()=>[a(fe,{"file-list":f.value,"onUpdate:fileList":s[7]||(s[7]=c=>f.value=c),action:"/api/upload/image","list-type":"picture-card",limit:5,"before-upload":p,"on-success":l,accept:"image/*",multiple:""},{file:o(({file:c})=>[h("div",null,[h("img",{class:"el-upload-list__item-thumbnail",src:c.url,alt:""},null,8,il),h("span",ul,[h("span",{class:"el-upload-list__item-preview",onClick:ee=>I(c)},[a(J,null,{default:o(()=>[a(be)]),_:1})],8,dl),h("span",{class:"el-upload-list__item-delete",onClick:ee=>M(c)},[a(J,null,{default:o(()=>[a(he)]),_:1})],8,cl)])])]),default:o(()=>[a(J,null,{default:o(()=>[a(K)]),_:1})]),_:1},8,["file-list"]),s[14]||(s[14]=h("div",{class:"upload-tip"},"最多上传 5 张轮播图片，用于展示资源详情",-1))]),_:1}),a(w,{label:"预览视频"},{default:o(()=>[a(fe,{"file-list":m.value,"onUpdate:fileList":s[8]||(s[8]=c=>m.value=c),action:"/api/upload/video",limit:1,"before-upload":F,"on-success":b,accept:"video/*",drag:""},{default:o(()=>[a(J,{class:"el-icon--upload"},{default:o(()=>[a(He)]),_:1}),s[15]||(s[15]=h("div",{class:"el-upload__text"},[Q(" 将视频文件拖到此处，或"),h("em",null,"点击上传")],-1))]),_:1},8,["file-list"]),s[16]||(s[16]=h("div",{class:"upload-tip"},"支持 MP4、MOV、AVI 等格式，大小不超过 50MB",-1))]),_:1})]),_:1}),a(Y,{class:"form-section",shadow:"never"},{header:o(()=>[h("div",pl,[s[18]||(s[18]=h("span",{class:"section-title"},"下载版本",-1)),a(de,{type:"primary",size:"small",onClick:A},{default:o(()=>[a(J,null,{default:o(()=>[a(K)]),_:1}),s[17]||(s[17]=Q(" 添加版本 "))]),_:1})])]),default:o(()=>[(y(!0),U(te,null,le(n.value,(c,ee)=>(y(),U("div",{key:c.id,class:"version-item"},[h("div",fl,[h("span",ml,"版本 "+ie(ee+1),1),n.value.length>1?(y(),z(de,{key:0,type:"danger",size:"small",onClick:L=>r(ee)},{default:o(()=>s[19]||(s[19]=[Q(" 删除 ")])),_:2},1032,["onClick"])):P("",!0)]),a(_e,{gutter:20},{default:o(()=>[a(x,{span:6},{default:o(()=>[a(w,{label:"版本号",size:"small"},{default:o(()=>[a(V,{modelValue:c.version,"onUpdate:modelValue":L=>c.version=L,placeholder:"如: v1.0.0"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),a(x,{span:6},{default:o(()=>[a(w,{label:"语言",size:"small"},{default:o(()=>[a(G,{modelValue:c.language,"onUpdate:modelValue":L=>c.language=L,placeholder:"选择语言"},{default:o(()=>[(y(),U(te,null,le(D,L=>a(H,{key:L.value,label:L.label,value:L.value},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),a(x,{span:6},{default:o(()=>[a(w,{label:"系统",size:"small"},{default:o(()=>[a(G,{modelValue:c.system,"onUpdate:modelValue":L=>c.system=L,placeholder:"选择系统"},{default:o(()=>[(y(),U(te,null,le(E,L=>a(H,{key:L.value,label:L.label,value:L.value},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),a(x,{span:6},{default:o(()=>[a(w,{label:"更新时间",size:"small"},{default:o(()=>[a(W,{modelValue:c.updateTime,"onUpdate:modelValue":L=>c.updateTime=L,type:"date",placeholder:"选择日期","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024),a(_e,{gutter:20},{default:o(()=>[a(x,{span:8},{default:o(()=>[a(w,{label:"文件大小",size:"small"},{default:o(()=>[a(V,{modelValue:c.size,"onUpdate:modelValue":L=>c.size=L,placeholder:"如: 125MB"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),a(x,{span:16},{default:o(()=>[a(w,{label:"下载链接",size:"small"},{default:o(()=>[a(V,{modelValue:c.downloadLink,"onUpdate:modelValue":L=>c.downloadLink=L,placeholder:"输入下载链接"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024),a(w,{label:"版本描述",size:"small"},{default:o(()=>[a(V,{modelValue:c.description,"onUpdate:modelValue":L=>c.description=L,type:"textarea",rows:2,placeholder:"版本更新说明或其他描述信息"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]))),128))]),_:1}),a(Y,{class:"form-section",shadow:"never"},{header:o(()=>s[20]||(s[20]=[h("span",{class:"section-title"},"其他设置",-1)])),default:o(()=>[a(w,{label:"资源类型"},{default:o(()=>[a(Ge,{modelValue:t.value.paymentType,"onUpdate:modelValue":s[9]||(s[9]=c=>t.value.paymentType=c)},{default:o(()=>[a(ke,{label:0},{default:o(()=>s[21]||(s[21]=[Q("免费资源")])),_:1}),a(ke,{label:1},{default:o(()=>s[22]||(s[22]=[Q("付费资源")])),_:1})]),_:1},8,["modelValue"])]),_:1}),a(w,{label:"资源密码"},{default:o(()=>[a(V,{modelValue:t.value.resourcePassword,"onUpdate:modelValue":s[10]||(s[10]=c=>t.value.resourcePassword=c),placeholder:"可选，为资源设置提取密码",maxlength:"20"},null,8,["modelValue"]),s[23]||(s[23]=h("div",{class:"form-tip"},"设置后用户下载时需要输入密码",-1))]),_:1})]),_:1}),h("div",vl,[a(de,{size:"large",onClick:S},{default:o(()=>s[24]||(s[24]=[Q("重置")])),_:1}),a(de,{type:"primary",size:"large",onClick:u},{default:o(()=>s[25]||(s[25]=[Q(" 发布资源 ")])),_:1})])]),_:1},8,["model","rules"])])}}}),Bl=yt(gl,[["__scopeId","data-v-41010d3f"]]);export{Bl as default};
