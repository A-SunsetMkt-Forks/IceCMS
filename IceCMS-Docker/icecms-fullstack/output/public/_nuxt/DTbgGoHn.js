import{D as bo,F as yo,H as _o,I as Xe,J as wo,K as Co,L as Eo,M as Io,N as ko,O as To,P as $o,_ as Ro,E as Bo}from"./CWE-KJV6.js";import{a as So,E as Mo}from"./ChnNiMOP.js";import{d as ee,E as Fo}from"./C8LkNO85.js";import{b as Ao,d as $e,_ as ae,ar as Ze,g as Ce,E as Ee,u as Oo,t as Lo,o as Do,s as Qe,h as Po,al as zo,aj as Ko,A as ze,ak as Ke,e as Ne,aA as No,as as Vo,aB as Uo,au as Go,aC as Ho,aD as Yo,aE as jo,aF as Jo,k as qo}from"./g0zu4MNc.js";import{c as W,O as Wo,E as xe,w as Ve}from"./BpqunBSk.js";import{E as Xo}from"./C7dLEZkI.js";import{b as Zo}from"./BM-sVEEH.js";import{d as se,M as Q,r as I,U as H,I as $,u as h,Y as be,Z as ve,an as Qo,D as ye,l as M,m as D,o as _,g as d,b as a,br as xo,bs as en,c as L,q as G,$ as on,a0 as _e,p as R,H as Fe,a7 as we,X as eo,al as oo,a6 as ie,a as c,N as pe,h as Z,F as no,n as Be,v as he,t as K,R as ge,e as Y,x as Re,T as nn,B as tn,aq as Ue,k as to,a8 as an,J as Se,L as Ae,at as sn,aj as ao,bk as so,aO as Ge,av as He,ae as ln,am as rn,_ as dn,y as un,a5 as fe,f as cn}from"./C_uFub58.js";import{j as fn}from"./dXWXmwas.js";import{E as de}from"./BUADUvnR.js";import{c as lo,a as pn,u as vn,b as mn,d as gn}from"./yw5b7RCA.js";import{F as hn,o as Ye,E as bn}from"./CXVv3ulD.js";import{E as yn}from"./D_trYo-7.js";import{_ as _n}from"./CpW1LMPF.js";import{v as wn}from"./U29o3j68.js";import{E as Cn}from"./CQdKq0Vt.js";import{E as ne}from"./B1mjav-x.js";import{E as En}from"./CtkJBwaH.js";import{a as In}from"./D4RXr1ss.js";import{i as kn}from"./CCjXN_O3.js";import"./Bo10sX-3.js";import"./CJdOkxoU.js";import"./DFZ1BoYC.js";import"./3Yncbi-l.js";import"./CRxF1tn9.js";import"./BtvKXLLF.js";import"./CxYcxH0g.js";const Tn=Ao({style:{type:$e([String,Array,Object])},currentTabId:{type:$e(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:$e(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:$n,ElCollectionItem:Rn,COLLECTION_INJECTION_KEY:Oe,COLLECTION_ITEM_INJECTION_KEY:Bn}=bo("RovingFocusGroup"),Le=Symbol("elRovingFocusGroup"),ro=Symbol("elRovingFocusGroupItem"),Sn={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},Mn=(e,n)=>e,Fn=(e,n,i)=>{const r=Mn(e.code);return Sn[r]},An=(e,n)=>e.map((i,r)=>e[(r+n)%e.length]),De=e=>{const{activeElement:n}=document;for(const i of e)if(i===n||(i.focus(),n!==document.activeElement))return},je="currentTabIdChange",Je="rovingFocusGroup.entryFocus",On={bubbles:!1,cancelable:!0},Ln=se({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:Tn,emits:[je,"entryFocus"],setup(e,{emit:n}){var i;const r=I((i=e.currentTabId||e.defaultCurrentTabId)!=null?i:null),p=I(!1),u=I(!1),m=I(null),{getItems:v}=H(Oe,void 0),y=$(()=>[{outline:"none"},e.style]),l=w=>{n(je,w)},B=()=>{p.value=!0},S=W(w=>{var k;(k=e.onMousedown)==null||k.call(e,w)},()=>{u.value=!0}),E=W(w=>{var k;(k=e.onFocus)==null||k.call(e,w)},w=>{const k=!h(u),{target:P,currentTarget:O}=w;if(P===O&&k&&!h(p)){const j=new Event(Je,On);if(O?.dispatchEvent(j),!j.defaultPrevented){const F=v().filter(z=>z.focusable),N=F.find(z=>z.active),A=F.find(z=>z.id===h(r)),J=[N,A,...F].filter(Boolean).map(z=>z.ref);De(J)}}u.value=!1}),f=W(w=>{var k;(k=e.onBlur)==null||k.call(e,w)},()=>{p.value=!1}),C=(...w)=>{n("entryFocus",...w)};be(Le,{currentTabbedId:Qo(r),loop:ve(e,"loop"),tabIndex:$(()=>h(p)?-1:0),rovingFocusGroupRef:m,rovingFocusGroupRootStyle:y,orientation:ve(e,"orientation"),dir:ve(e,"dir"),onItemFocus:l,onItemShiftTab:B,onBlur:f,onFocus:E,onMousedown:S}),ye(()=>e.currentTabId,w=>{r.value=w??null}),Zo(m,Je,C)}});function Dn(e,n,i,r,p,u){return Q(e.$slots,"default")}var Pn=ae(Ln,[["render",Dn],["__file","roving-focus-group-impl.vue"]]);const zn=se({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:$n,ElRovingFocusGroupImpl:Pn}});function Kn(e,n,i,r,p,u){const m=M("el-roving-focus-group-impl"),v=M("el-focus-group-collection");return _(),D(v,null,{default:d(()=>[a(m,xo(en(e.$attrs)),{default:d(()=>[Q(e.$slots,"default")]),_:3},16)]),_:3})}var Nn=ae(zn,[["render",Kn],["__file","roving-focus-group.vue"]]);const Ie=Symbol("elDropdown"),{ButtonGroup:Vn}=Ee,Un=se({name:"ElDropdown",components:{ElButton:Ee,ElButtonGroup:Vn,ElScrollbar:Xo,ElDropdownCollection:_o,ElTooltip:xe,ElRovingFocusGroup:Nn,ElOnlyChild:Wo,ElIcon:Ce,ArrowDown:Ze},props:yo,emits:["visible-change","click","command"],setup(e,{emit:n}){const i=oo(),r=Fe("dropdown"),{t:p}=Oo(),u=I(),m=I(),v=I(null),y=I(null),l=I(null),B=I(null),S=I(!1),E=$(()=>({maxHeight:Lo(e.maxHeight)})),f=$(()=>[r.m(F.value)]),C=$(()=>fn(e.trigger)),w=we().value,k=$(()=>e.id||w);ye([u,C],([o,b],[T])=>{var x,U,oe;(x=T?.$el)!=null&&x.removeEventListener&&T.$el.removeEventListener("pointerenter",A),(U=o?.$el)!=null&&U.removeEventListener&&o.$el.removeEventListener("pointerenter",A),(oe=o?.$el)!=null&&oe.addEventListener&&b.includes("hover")&&o.$el.addEventListener("pointerenter",A)},{immediate:!0}),eo(()=>{var o,b;(b=(o=u.value)==null?void 0:o.$el)!=null&&b.removeEventListener&&u.value.$el.removeEventListener("pointerenter",A)});function P(){O()}function O(){var o;(o=v.value)==null||o.onClose()}function j(){var o;(o=v.value)==null||o.onOpen()}const F=Do();function N(...o){n("command",...o)}function A(){var o,b;(b=(o=u.value)==null?void 0:o.$el)==null||b.focus()}function V(){}function J(){const o=h(y);C.value.includes("hover")&&o?.focus(),B.value=null}function z(o){B.value=o}function re(o){S.value||(o.preventDefault(),o.stopImmediatePropagation())}function q(){n("visible-change",!0)}function X(o){o?.type==="keydown"&&y.value.focus()}function ce(){n("visible-change",!1)}return be(Ie,{contentRef:y,role:$(()=>e.role),triggerId:k,isUsingKeyboard:S,onItemEnter:V,onItemLeave:J}),be("elDropdown",{instance:i,dropdownSize:F,handleClick:P,commandHandler:N,trigger:ve(e,"trigger"),hideOnClick:ve(e,"hideOnClick")}),{t:p,ns:r,scrollbar:l,wrapStyle:E,dropdownTriggerKls:f,dropdownSize:F,triggerId:k,currentTabId:B,handleCurrentTabIdChange:z,handlerMainButtonClick:o=>{n("click",o)},handleEntryFocus:re,handleClose:O,handleOpen:j,handleBeforeShowTooltip:q,handleShowTooltip:X,handleBeforeHideTooltip:ce,onFocusAfterTrapped:o=>{var b,T;o.preventDefault(),(T=(b=y.value)==null?void 0:b.focus)==null||T.call(b,{preventScroll:!0})},popperRef:v,contentRef:y,triggeringElementRef:u,referenceElementRef:m}}});function Gn(e,n,i,r,p,u){var m;const v=M("el-dropdown-collection"),y=M("el-roving-focus-group"),l=M("el-scrollbar"),B=M("el-only-child"),S=M("el-tooltip"),E=M("el-button"),f=M("arrow-down"),C=M("el-icon"),w=M("el-button-group");return _(),L("div",{class:R([e.ns.b(),e.ns.is("disabled",e.disabled)])},[a(S,{ref:"popperRef",role:e.role,effect:e.effect,"fallback-placements":["bottom","top"],"popper-options":e.popperOptions,"gpu-acceleration":!1,"hide-after":e.trigger==="hover"?e.hideTimeout:0,"manual-mode":!0,placement:e.placement,"popper-class":[e.ns.e("popper"),e.popperClass],"reference-element":(m=e.referenceElementRef)==null?void 0:m.$el,trigger:e.trigger,"trigger-keys":e.triggerKeys,"trigger-target-el":e.contentRef,"show-after":e.trigger==="hover"?e.showTimeout:0,"stop-popper-mouse-event":!1,"virtual-ref":e.triggeringElementRef,"virtual-triggering":e.splitButton,disabled:e.disabled,transition:`${e.ns.namespace.value}-zoom-in-top`,teleported:e.teleported,pure:"",persistent:"",onBeforeShow:e.handleBeforeShowTooltip,onShow:e.handleShowTooltip,onBeforeHide:e.handleBeforeHideTooltip},on({content:d(()=>[a(l,{ref:"scrollbar","wrap-style":e.wrapStyle,tag:"div","view-class":e.ns.e("list")},{default:d(()=>[a(y,{loop:e.loop,"current-tab-id":e.currentTabId,orientation:"horizontal",onCurrentTabIdChange:e.handleCurrentTabIdChange,onEntryFocus:e.handleEntryFocus},{default:d(()=>[a(v,null,{default:d(()=>[Q(e.$slots,"dropdown")]),_:3})]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange","onEntryFocus"])]),_:3},8,["wrap-style","view-class"])]),_:2},[e.splitButton?void 0:{name:"default",fn:d(()=>[a(B,{id:e.triggerId,ref:"triggeringElementRef",role:"button",tabindex:e.tabindex},{default:d(()=>[Q(e.$slots,"default")]),_:3},8,["id","tabindex"])])}]),1032,["role","effect","popper-options","hide-after","placement","popper-class","reference-element","trigger","trigger-keys","trigger-target-el","show-after","virtual-ref","virtual-triggering","disabled","transition","teleported","onBeforeShow","onShow","onBeforeHide"]),e.splitButton?(_(),D(w,{key:0},{default:d(()=>[a(E,_e({ref:"referenceElementRef"},e.buttonProps,{size:e.dropdownSize,type:e.type,disabled:e.disabled,tabindex:e.tabindex,onClick:e.handlerMainButtonClick}),{default:d(()=>[Q(e.$slots,"default")]),_:3},16,["size","type","disabled","tabindex","onClick"]),a(E,_e({id:e.triggerId,ref:"triggeringElementRef"},e.buttonProps,{role:"button",size:e.dropdownSize,type:e.type,class:e.ns.e("caret-button"),disabled:e.disabled,tabindex:e.tabindex,"aria-label":e.t("el.dropdown.toggleDropdown")}),{default:d(()=>[a(C,{class:R(e.ns.e("icon"))},{default:d(()=>[a(f)]),_:1},8,["class"])]),_:1},16,["id","size","type","class","disabled","tabindex","aria-label"])]),_:3})):G("v-if",!0)],2)}var Hn=ae(Un,[["render",Gn],["__file","dropdown.vue"]]);const Yn=se({components:{ElRovingFocusCollectionItem:Rn},props:{focusable:{type:Boolean,default:!0},active:{type:Boolean,default:!1}},emits:["mousedown","focus","keydown"],setup(e,{emit:n}){const{currentTabbedId:i,loop:r,onItemFocus:p,onItemShiftTab:u}=H(Le,void 0),{getItems:m}=H(Oe,void 0),v=we(),y=I(null),l=W(f=>{n("mousedown",f)},f=>{e.focusable?p(h(v)):f.preventDefault()}),B=W(f=>{n("focus",f)},()=>{p(h(v))}),S=W(f=>{n("keydown",f)},f=>{const{code:C,shiftKey:w,target:k,currentTarget:P}=f;if(C===de.tab&&w){u();return}if(k!==P)return;const O=Fn(f);if(O){f.preventDefault();let F=m().filter(N=>N.focusable).map(N=>N.ref);switch(O){case"last":{F.reverse();break}case"prev":case"next":{O==="prev"&&F.reverse();const N=F.indexOf(P);F=r.value?An(F,N+1):F.slice(N+1);break}}ie(()=>{De(F)})}}),E=$(()=>i.value===h(v));return be(ro,{rovingFocusGroupItemRef:y,tabIndex:$(()=>h(E)?0:-1),handleMousedown:l,handleFocus:B,handleKeydown:S}),{id:v,handleKeydown:S,handleFocus:B,handleMousedown:l}}});function jn(e,n,i,r,p,u){const m=M("el-roving-focus-collection-item");return _(),D(m,{id:e.id,focusable:e.focusable,active:e.active},{default:d(()=>[Q(e.$slots,"default")]),_:3},8,["id","focusable","active"])}var Jn=ae(Yn,[["render",jn],["__file","roving-focus-item.vue"]]);const qn=se({name:"DropdownItemImpl",components:{ElIcon:Ce},props:Xe,emits:["pointermove","pointerleave","click","clickimpl"],setup(e,{emit:n}){const i=Fe("dropdown"),{role:r}=H(Ie,void 0),{collectionItemRef:p}=H(Co,void 0),{collectionItemRef:u}=H(Bn,void 0),{rovingFocusGroupItemRef:m,tabIndex:v,handleFocus:y,handleKeydown:l,handleMousedown:B}=H(ro,void 0),S=lo(p,u,m),E=$(()=>r.value==="menu"?"menuitem":r.value==="navigation"?"link":"button"),f=W(C=>{if([de.enter,de.numpadEnter,de.space].includes(C.code))return C.preventDefault(),C.stopImmediatePropagation(),n("clickimpl",C),!0},l);return{ns:i,itemRef:S,dataset:{[wo]:""},role:E,tabIndex:v,handleFocus:y,handleKeydown:f,handleMousedown:B}}});function Wn(e,n,i,r,p,u){const m=M("el-icon");return _(),L(no,null,[e.divided?(_(),L("li",{key:0,role:"separator",class:R(e.ns.bem("menu","item","divided"))},null,2)):G("v-if",!0),c("li",_e({ref:e.itemRef},{...e.dataset,...e.$attrs},{"aria-disabled":e.disabled,class:[e.ns.be("menu","item"),e.ns.is("disabled",e.disabled)],tabindex:e.tabIndex,role:e.role,onClick:v=>e.$emit("clickimpl",v),onFocus:e.handleFocus,onKeydown:Z(e.handleKeydown,["self"]),onMousedown:e.handleMousedown,onPointermove:v=>e.$emit("pointermove",v),onPointerleave:v=>e.$emit("pointerleave",v)}),[e.icon?(_(),D(m,{key:0},{default:d(()=>[(_(),D(pe(e.icon)))]),_:1})):G("v-if",!0),Q(e.$slots,"default")],16,["aria-disabled","tabindex","role","onClick","onFocus","onKeydown","onMousedown","onPointermove","onPointerleave"])],64)}var Xn=ae(qn,[["render",Wn],["__file","dropdown-item-impl.vue"]]);const io=()=>{const e=H("elDropdown",{}),n=$(()=>e?.dropdownSize);return{elDropdown:e,_elDropdownSize:n}},Zn=se({name:"ElDropdownItem",components:{ElDropdownCollectionItem:Eo,ElRovingFocusItem:Jn,ElDropdownItemImpl:Xn},inheritAttrs:!1,props:Xe,emits:["pointermove","pointerleave","click"],setup(e,{emit:n,attrs:i}){const{elDropdown:r}=io(),p=oo(),u=I(null),m=$(()=>{var f,C;return(C=(f=h(u))==null?void 0:f.textContent)!=null?C:""}),{onItemEnter:v,onItemLeave:y}=H(Ie,void 0),l=W(f=>(n("pointermove",f),f.defaultPrevented),Ve(f=>{if(e.disabled){y(f);return}const C=f.currentTarget;C===document.activeElement||C.contains(document.activeElement)||(v(f),f.defaultPrevented||C?.focus())})),B=W(f=>(n("pointerleave",f),f.defaultPrevented),Ve(y)),S=W(f=>{if(!e.disabled)return n("click",f),f.type!=="keydown"&&f.defaultPrevented},f=>{var C,w,k;if(e.disabled){f.stopImmediatePropagation();return}(C=r?.hideOnClick)!=null&&C.value&&((w=r.handleClick)==null||w.call(r)),(k=r.commandHandler)==null||k.call(r,e.command,p,f)}),E=$(()=>({...e,...i}));return{handleClick:S,handlePointerMove:l,handlePointerLeave:B,textContent:m,propsAndAttrs:E}}});function Qn(e,n,i,r,p,u){var m;const v=M("el-dropdown-item-impl"),y=M("el-roving-focus-item"),l=M("el-dropdown-collection-item");return _(),D(l,{disabled:e.disabled,"text-value":(m=e.textValue)!=null?m:e.textContent},{default:d(()=>[a(y,{focusable:!e.disabled},{default:d(()=>[a(v,_e(e.propsAndAttrs,{onPointerleave:e.handlePointerLeave,onPointermove:e.handlePointerMove,onClickimpl:e.handleClick}),{default:d(()=>[Q(e.$slots,"default")]),_:3},16,["onPointerleave","onPointermove","onClickimpl"])]),_:3},8,["focusable"])]),_:3},8,["disabled","text-value"])}var uo=ae(Zn,[["render",Qn],["__file","dropdown-item.vue"]]);const xn=se({name:"ElDropdownMenu",props:Io,setup(e){const n=Fe("dropdown"),{_elDropdownSize:i}=io(),r=i.value,{focusTrapRef:p,onKeydown:u}=H(hn,void 0),{contentRef:m,role:v,triggerId:y}=H(Ie,void 0),{collectionRef:l,getItems:B}=H($o,void 0),{rovingFocusGroupRef:S,rovingFocusGroupRootStyle:E,tabIndex:f,onBlur:C,onFocus:w,onMousedown:k}=H(Le,void 0),{collectionRef:P}=H(Oe,void 0),O=$(()=>[n.b("menu"),n.bm("menu",r?.value)]),j=lo(m,l,p,S,P),F=W(A=>{var V;(V=e.onKeydown)==null||V.call(e,A)},A=>{const{currentTarget:V,code:J,target:z}=A;if(V.contains(z),de.tab===J&&A.stopImmediatePropagation(),A.preventDefault(),z!==h(m)||!ko.includes(J))return;const q=B().filter(X=>!X.disabled).map(X=>X.ref);To.includes(J)&&q.reverse(),De(q)});return{size:r,rovingFocusGroupRootStyle:E,tabIndex:f,dropdownKls:O,role:v,triggerId:y,dropdownListWrapperRef:j,handleKeydown:A=>{F(A),u(A)},onBlur:C,onFocus:w,onMousedown:k}}});function et(e,n,i,r,p,u){return _(),L("ul",{ref:e.dropdownListWrapperRef,class:R(e.dropdownKls),style:Be(e.rovingFocusGroupRootStyle),tabindex:-1,role:e.role,"aria-labelledby":e.triggerId,onBlur:e.onBlur,onFocus:e.onFocus,onKeydown:Z(e.handleKeydown,["self"]),onMousedown:Z(e.onMousedown,["self"])},[Q(e.$slots,"default")],46,["role","aria-labelledby","onBlur","onFocus","onKeydown","onMousedown"])}var co=ae(xn,[["render",et],["__file","dropdown-menu.vue"]]);const ot=Po(Hn,{DropdownItem:uo,DropdownMenu:co}),nt=Qe(uo),tt=Qe(co),Me="_trap-focus-children",le=[],qe=e=>{if(le.length===0)return;const n=le[le.length-1][Me];if(n.length>0&&e.code===de.tab){if(n.length===1){e.preventDefault(),document.activeElement!==n[0]&&n[0].focus();return}const i=e.shiftKey,r=e.target===n[0],p=e.target===n[n.length-1];r&&i&&(e.preventDefault(),n[n.length-1].focus()),p&&!i&&(e.preventDefault(),n[0].focus())}},at={beforeMount(e){e[Me]=Ye(e),le.push(e),le.length<=1&&document.addEventListener("keydown",qe)},updated(e){ie(()=>{e[Me]=Ye(e)})},unmounted(){le.shift(),le.length===0&&document.removeEventListener("keydown",qe)}},st=se({name:"ElMessageBox",directives:{TrapFocus:at},components:{ElButton:Ee,ElFocusTrap:bn,ElInput:Cn,ElOverlay:pn,ElIcon:Ce,...zo},inheritAttrs:!1,props:{buttonSize:{type:String,validator:kn},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,overflow:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(e,{emit:n}){const{locale:i,zIndex:r,ns:p,size:u}=Ko("message-box",$(()=>e.buttonSize)),{t:m}=i,{nextZIndex:v}=r,y=I(!1),l=tn({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:null,inputValidator:null,inputErrorMessage:"",message:null,modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonLoadingIcon:Ue(ze),cancelButtonLoadingIcon:Ue(ze),confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:v()}),B=$(()=>{const o=l.type;return{[p.bm("icon",o)]:o&&Ke[o]}}),S=we(),E=we(),f=$(()=>l.icon||Ke[l.type]||""),C=$(()=>!!l.message),w=I(),k=I(),P=I(),O=I(),j=I(),F=$(()=>l.confirmButtonClass);ye(()=>l.inputValue,async o=>{await ie(),e.boxType==="prompt"&&o!==null&&X()},{immediate:!0}),ye(()=>y.value,o=>{var b,T;o&&(e.boxType!=="prompt"&&(l.autofocus?P.value=(T=(b=j.value)==null?void 0:b.$el)!=null?T:w.value:P.value=w.value),l.zIndex=v()),e.boxType==="prompt"&&(o?ie().then(()=>{var x;O.value&&O.value.$el&&(l.autofocus?P.value=(x=ce())!=null?x:w.value:P.value=w.value)}):(l.editorErrorMessage="",l.validateError=!1))});const N=$(()=>e.draggable),A=$(()=>e.overflow);vn(w,k,N,A),to(async()=>{await ie(),e.closeOnHashChange&&window.addEventListener("hashchange",V)}),eo(()=>{e.closeOnHashChange&&window.removeEventListener("hashchange",V)});function V(){y.value&&(y.value=!1,ie(()=>{l.action&&n("action",l.action)}))}const J=()=>{e.closeOnClickModal&&q(l.distinguishCancelAndClose?"close":"cancel")},z=gn(J),re=o=>{if(l.inputType!=="textarea")return o.preventDefault(),q("confirm")},q=o=>{var b;e.boxType==="prompt"&&o==="confirm"&&!X()||(l.action=o,l.beforeClose?(b=l.beforeClose)==null||b.call(l,o,l,V):V())},X=()=>{if(e.boxType==="prompt"){const o=l.inputPattern;if(o&&!o.test(l.inputValue||""))return l.editorErrorMessage=l.inputErrorMessage||m("el.messagebox.error"),l.validateError=!0,!1;const b=l.inputValidator;if(Se(b)){const T=b(l.inputValue);if(T===!1)return l.editorErrorMessage=l.inputErrorMessage||m("el.messagebox.error"),l.validateError=!0,!1;if(Ae(T))return l.editorErrorMessage=T,l.validateError=!0,!1}}return l.editorErrorMessage="",l.validateError=!1,!0},ce=()=>{const o=O.value.$refs;return o.input||o.textarea},s=()=>{q("close")},t=()=>{e.closeOnPressEscape&&s()};return e.lockScroll&&mn(y),{...an(l),ns:p,overlayEvent:z,visible:y,hasMessage:C,typeClass:B,contentId:S,inputId:E,btnSize:u,iconComponent:f,confirmButtonClasses:F,rootRef:w,focusStartRef:P,headerRef:k,inputRef:O,confirmRef:j,doClose:V,handleClose:s,onCloseRequested:t,handleWrapperClick:J,handleInputEnter:re,handleAction:q,t:m}}});function lt(e,n,i,r,p,u){const m=M("el-icon"),v=M("close"),y=M("el-input"),l=M("el-button"),B=M("el-focus-trap"),S=M("el-overlay");return _(),D(nn,{name:"fade-in-linear",onAfterLeave:E=>e.$emit("vanish"),persisted:""},{default:d(()=>[he(a(S,{"z-index":e.zIndex,"overlay-class":[e.ns.is("message-box"),e.modalClass],mask:e.modal},{default:d(()=>[c("div",{role:"dialog","aria-label":e.title,"aria-modal":"true","aria-describedby":e.showInput?void 0:e.contentId,class:R(`${e.ns.namespace.value}-overlay-message-box`),onClick:e.overlayEvent.onClick,onMousedown:e.overlayEvent.onMousedown,onMouseup:e.overlayEvent.onMouseup},[a(B,{loop:"",trapped:e.visible,"focus-trap-el":e.rootRef,"focus-start-el":e.focusStartRef,onReleaseRequested:e.onCloseRequested},{default:d(()=>[c("div",{ref:"rootRef",class:R([e.ns.b(),e.customClass,e.ns.is("draggable",e.draggable),{[e.ns.m("center")]:e.center}]),style:Be(e.customStyle),tabindex:"-1",onClick:Z(()=>{},["stop"])},[e.title!==null&&e.title!==void 0?(_(),L("div",{key:0,ref:"headerRef",class:R([e.ns.e("header"),{"show-close":e.showClose}])},[c("div",{class:R(e.ns.e("title"))},[e.iconComponent&&e.center?(_(),D(m,{key:0,class:R([e.ns.e("status"),e.typeClass])},{default:d(()=>[(_(),D(pe(e.iconComponent)))]),_:1},8,["class"])):G("v-if",!0),c("span",null,K(e.title),1)],2),e.showClose?(_(),L("button",{key:0,type:"button",class:R(e.ns.e("headerbtn")),"aria-label":e.t("el.messagebox.close"),onClick:E=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),onKeydown:ge(Z(E=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"])},[a(m,{class:R(e.ns.e("close"))},{default:d(()=>[a(v)]),_:1},8,["class"])],42,["aria-label","onClick","onKeydown"])):G("v-if",!0)],2)):G("v-if",!0),c("div",{id:e.contentId,class:R(e.ns.e("content"))},[c("div",{class:R(e.ns.e("container"))},[e.iconComponent&&!e.center&&e.hasMessage?(_(),D(m,{key:0,class:R([e.ns.e("status"),e.typeClass])},{default:d(()=>[(_(),D(pe(e.iconComponent)))]),_:1},8,["class"])):G("v-if",!0),e.hasMessage?(_(),L("div",{key:1,class:R(e.ns.e("message"))},[Q(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(_(),D(pe(e.showInput?"label":"p"),{key:1,for:e.showInput?e.inputId:void 0,innerHTML:e.message},null,8,["for","innerHTML"])):(_(),D(pe(e.showInput?"label":"p"),{key:0,for:e.showInput?e.inputId:void 0},{default:d(()=>[Y(K(e.dangerouslyUseHTMLString?"":e.message),1)]),_:1},8,["for"]))])],2)):G("v-if",!0)],2),he(c("div",{class:R(e.ns.e("input"))},[a(y,{id:e.inputId,ref:"inputRef",modelValue:e.inputValue,"onUpdate:modelValue":E=>e.inputValue=E,type:e.inputType,placeholder:e.inputPlaceholder,"aria-invalid":e.validateError,class:R({invalid:e.validateError}),onKeydown:ge(e.handleInputEnter,["enter"])},null,8,["id","modelValue","onUpdate:modelValue","type","placeholder","aria-invalid","class","onKeydown"]),c("div",{class:R(e.ns.e("errormsg")),style:Be({visibility:e.editorErrorMessage?"visible":"hidden"})},K(e.editorErrorMessage),7)],2),[[Re,e.showInput]])],10,["id"]),c("div",{class:R(e.ns.e("btns"))},[e.showCancelButton?(_(),D(l,{key:0,loading:e.cancelButtonLoading,"loading-icon":e.cancelButtonLoadingIcon,class:R([e.cancelButtonClass]),round:e.roundButton,size:e.btnSize,onClick:E=>e.handleAction("cancel"),onKeydown:ge(Z(E=>e.handleAction("cancel"),["prevent"]),["enter"])},{default:d(()=>[Y(K(e.cancelButtonText||e.t("el.messagebox.cancel")),1)]),_:1},8,["loading","loading-icon","class","round","size","onClick","onKeydown"])):G("v-if",!0),he(a(l,{ref:"confirmRef",type:"primary",loading:e.confirmButtonLoading,"loading-icon":e.confirmButtonLoadingIcon,class:R([e.confirmButtonClasses]),round:e.roundButton,disabled:e.confirmButtonDisabled,size:e.btnSize,onClick:E=>e.handleAction("confirm"),onKeydown:ge(Z(E=>e.handleAction("confirm"),["prevent"]),["enter"])},{default:d(()=>[Y(K(e.confirmButtonText||e.t("el.messagebox.confirm")),1)]),_:1},8,["loading","loading-icon","class","round","disabled","size","onClick","onKeydown"]),[[Re,e.showConfirmButton]])],2)],14,["onClick"])]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,["aria-label","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["z-index","overlay-class","mask"]),[[Re,e.visible]])]),_:3},8,["onAfterLeave"])}var rt=ae(st,[["render",lt],["__file","index.vue"]]);const me=new Map,it=e=>{let n=document.body;return e.appendTo&&(Ae(e.appendTo)&&(n=document.querySelector(e.appendTo)),He(e.appendTo)&&(n=e.appendTo),He(n)||(n=document.body)),n},dt=(e,n,i=null)=>{const r=a(rt,e,Se(e.message)||ao(e.message)?{default:Se(e.message)?e.message:()=>e.message}:null);return r.appContext=i,so(r,n),it(e).appendChild(n.firstElementChild),r.component},ut=()=>document.createElement("div"),ct=(e,n)=>{const i=ut();e.onVanish=()=>{so(null,i),me.delete(p)},e.onAction=u=>{const m=me.get(p);let v;e.showInput?v={value:p.inputValue,action:u}:v=u,e.callback?e.callback(v,r.proxy):u==="cancel"||u==="close"?e.distinguishCancelAndClose&&u!=="cancel"?m.reject("close"):m.reject("cancel"):m.resolve(v)};const r=dt(e,i,n),p=r.proxy;for(const u in e)Ge(e,u)&&!Ge(p.$props,u)&&(p[u]=e[u]);return p.visible=!0,p};function ue(e,n=null){if(!sn)return Promise.reject();let i;return Ae(e)||ao(e)?e={message:e}:i=e.callback,new Promise((r,p)=>{const u=ct(e,n??ue._context);me.set(u,{options:e,callback:i,resolve:r,reject:p})})}const ft=["alert","confirm","prompt"],pt={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};ft.forEach(e=>{ue[e]=vt(e)});function vt(e){return(n,i,r,p)=>{let u="";return ln(i)?(r=i,u=""):rn(i)?u="":u=i,ue(Object.assign({title:u,message:n,type:"",...pt[e]},r,{boxType:e}),p)}}ue.close=()=>{me.forEach((e,n)=>{n.doClose()}),me.clear()};ue._context=null;const te=ue;te.install=e=>{te._context=e._context,e.config.globalProperties.$msgbox=te,e.config.globalProperties.$messageBox=te,e.config.globalProperties.$alert=te.alert,e.config.globalProperties.$confirm=te.confirm,e.config.globalProperties.$prompt=te.prompt};const We=te,mt={class:"home"},gt={"data-server-rendered":"true",id:"__nuxt"},ht={id:"__layout"},bt={"data-fetch-key":"0",class:"app macwk-animation"},yt={class:"system-notification-container"},_t={class:"page-header"},wt={class:"stats-bar"},Ct={class:"stat-item"},Et={class:"stat-number"},It={class:"stat-item"},kt={class:"stat-number"},Tt={class:"stat-item"},$t={class:"stat-number"},Rt={class:"filter-bar"},Bt={class:"filter-left"},St={class:"filter-right"},Mt={class:"notifications-list"},Ft={key:0,class:"empty-state"},At=["onClick"],Ot={key:0,class:"priority-indicator"},Lt={class:"notification-content"},Dt={class:"left-section"},Pt={class:"author-info"},zt={class:"author-details"},Kt={class:"author-name"},Nt={class:"author-role"},Vt={class:"center-section"},Ut={class:"notification-header"},Gt={class:"notification-title"},Ht={class:"notification-meta"},Yt={class:"notification-time"},jt={key:0,class:"read-status"},Jt={class:"notification-body"},qt={key:0,class:"notification-summary"},Wt=["innerHTML"],Xt=["onClick"],Zt={class:"right-section"},Qt={class:"action-buttons"},xt={key:0,class:"pagination-container"},ea={__name:"system",setup(e){const n=I(!1),i=I([]),r=I(1),p=I(20),u=I(0),m=I(""),v=I(""),y=I([]),l=$(()=>i.value.filter(s=>!s.isRead).length),B=$(()=>{const s=ee().format("YYYY-MM-DD");return i.value.filter(t=>ee(t.caeated||t.createdAt).format("YYYY-MM-DD")===s).length}),S=$(()=>{let s=[...i.value];if(m.value&&(s=s.filter(t=>t.type===m.value)),v.value&&(v.value==="unread"?s=s.filter(t=>!t.isRead):v.value==="read"&&(s=s.filter(t=>t.isRead))),y.value&&y.value.length===2){const[t,o]=y.value;s=s.filter(b=>{const T=ee(b.caeated||b.createdAt);return T.isAfter(ee(t).subtract(1,"day"))&&T.isBefore(ee(o).add(1,"day"))})}return s.sort((t,o)=>{const b=ee(t.caeated||t.createdAt);return ee(o.caeated||o.createdAt).diff(b)})}),E=async()=>{n.value=!0;try{const s=await In();console.log("公告数据:",s),s&&s.data&&(i.value=s.data.map((t,o)=>({...t,isRead:Math.random()>.3,priority:o%5===0?"high":"normal",type:f(),isFavorite:!1,expanded:!1,authorAvatar:null})),u.value=i.value.length)}catch(s){console.error("获取公告失败:",s),ne.error("获取公告失败")}finally{n.value=!1}},f=()=>{const s=["system","security","update","activity"];return s[Math.floor(Math.random()*s.length)]},C=s=>`https://ui-avatars.com/api/?name=${encodeURIComponent(s||"System")}&background=409eff&color=fff`,w=s=>{if(!s)return"系统";const t=["管理员","运营","技术","客服"];return t[Math.floor(Math.random()*t.length)]},k=s=>({system:"系统通知",security:"安全提醒",update:"功能更新",activity:"活动公告"})[s]||"通知",P=s=>({system:"badge-system",security:"badge-security",update:"badge-update",activity:"badge-activity"})[s]||"badge-default",O=s=>{if(!s)return"";const t=ee(),o=ee(s);return t.diff(o,"minute")<1?"刚刚":t.diff(o,"hour")<1?`${t.diff(o,"minute")}分钟前`:t.diff(o,"day")<1?`${t.diff(o,"hour")}小时前`:t.diff(o,"day")<7?`${t.diff(o,"day")}天前`:o.format("YYYY-MM-DD HH:mm")},j=s=>{if(!s)return"";const t=s.replace(/<[^>]*>/g,"");return t.length>100?`${t.substring(0,100)}...`:t},F=s=>s?s.replace(/<[^>]*>/g,"").length>100:!1,N=s=>{s.isRead||A(s)},A=s=>{s.isRead=!0,ne.success("已标记为已读")},V=async()=>{try{await We.confirm("确定要将所有通知标记为已读吗？","确认操作",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),i.value.forEach(s=>{s.isRead=!0}),En({title:"操作成功",message:"所有通知已标记为已读",type:"success"})}catch{}},J=s=>{s.isFavorite=!s.isFavorite,ne.success(s.isFavorite?"已收藏":"已取消收藏")},z=s=>{s.expanded=!s.expanded},re=()=>{E(),ne.success("列表已刷新")},q=async s=>{const[t,o]=s.split("_"),b=i.value.find(T=>T.id.toString()===o);if(b)switch(t){case"copy":try{await navigator.clipboard.writeText(b.content.replace(/<[^>]*>/g,"")),ne.success("内容已复制到剪贴板")}catch{ne.error("复制失败")}break;case"share":ne.info("分享功能开发中...");break;case"delete":try{await We.confirm("确定要删除这条通知吗？","确认删除",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"});const T=i.value.findIndex(x=>x.id.toString()===o);T>-1&&(i.value.splice(T,1),u.value--,ne.success("通知已删除"))}catch{}break}},X=s=>{p.value=s,r.value=1},ce=s=>{r.value=s};return to(()=>{E()}),(s,t)=>{const o=Ro,b=So,T=Mo,x=Fo,U=Ce,oe=Ee,fo=Bo,Pe=xe,ke=nt,po=tt,vo=ot,mo=yn,go=_n,ho=wn;return _(),L("div",mt,[c("div",gt,[c("div",ht,[c("div",bt,[a(o),c("div",yt,[c("div",_t,[t[8]||(t[8]=un('<div class="header-content" data-v-60c54055><div class="header-icon" data-v-60c54055><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-60c54055><path d="M18 8A6 6 0 0 0 6 8C6 15 3 17 3 17H21S18 15 18 8Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-60c54055></path><path d="M13.73 21A2 2 0 0 1 10.27 21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-60c54055></path></svg></div><div class="header-text" data-v-60c54055><h1 data-v-60c54055>系统公告</h1><p data-v-60c54055>查看最新的系统消息和重要通知</p></div></div>',1)),c("div",wt,[c("div",Ct,[c("span",Et,K(h(u)),1),t[5]||(t[5]=c("span",{class:"stat-label"},"总计",-1))]),c("div",It,[c("span",kt,K(h(l)),1),t[6]||(t[6]=c("span",{class:"stat-label"},"未读",-1))]),c("div",Tt,[c("span",$t,K(h(B)),1),t[7]||(t[7]=c("span",{class:"stat-label"},"今日",-1))])])]),c("div",Rt,[c("div",Bt,[a(T,{modelValue:h(m),"onUpdate:modelValue":t[0]||(t[0]=g=>fe(m)?m.value=g:null),placeholder:"通知类型",clearable:"",size:"default",class:"filter-select"},{default:d(()=>[a(b,{label:"全部",value:""}),a(b,{label:"系统通知",value:"system"}),a(b,{label:"安全提醒",value:"security"}),a(b,{label:"功能更新",value:"update"}),a(b,{label:"活动公告",value:"activity"})]),_:1},8,["modelValue"]),a(T,{modelValue:h(v),"onUpdate:modelValue":t[1]||(t[1]=g=>fe(v)?v.value=g:null),placeholder:"阅读状态",clearable:"",size:"default",class:"filter-select"},{default:d(()=>[a(b,{label:"全部",value:""}),a(b,{label:"未读",value:"unread"}),a(b,{label:"已读",value:"read"})]),_:1},8,["modelValue"]),a(x,{modelValue:h(y),"onUpdate:modelValue":t[2]||(t[2]=g=>fe(y)?y.value=g:null),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"default",class:"date-picker"},null,8,["modelValue"])]),c("div",St,[a(oe,{onClick:V,type:"primary",size:"default"},{default:d(()=>[a(U,null,{default:d(()=>[a(h(Ne))]),_:1}),t[9]||(t[9]=Y(" 全部标记已读 "))]),_:1}),a(oe,{onClick:re,size:"default"},{default:d(()=>[a(U,null,{default:d(()=>[a(h(No))]),_:1}),t[10]||(t[10]=Y(" 刷新 "))]),_:1})])]),he((_(),L("div",Mt,[h(S).length===0&&!h(n)?(_(),L("div",Ft,t[11]||(t[11]=[c("div",{class:"empty-icon"},[c("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[c("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2"}),c("path",{d:"M9 12L11 14L15 10",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1),c("h3",null,"暂无公告",-1),c("p",null,"当前没有符合条件的系统公告",-1)]))):(_(!0),L(no,{key:1},cn(h(S),g=>(_(),L("div",{class:R(["notification-item",{unread:!g.isRead,important:g.priority==="high"}]),key:g.id,onClick:Te=>N(g)},[g.priority==="high"?(_(),L("div",Ot)):G("",!0),c("div",Lt,[c("div",Dt,[c("div",Pt,[a(fo,{size:50,src:g.authorAvatar||C(g.author)},{default:d(()=>[Y(K(g.author?g.author.charAt(0):"S"),1)]),_:2},1032,["src"]),c("div",zt,[c("div",Kt,K(g.author||"系统管理员"),1),c("div",Nt,K(w(g.author)),1)])])]),c("div",Vt,[c("div",Ut,[c("h3",Gt,[Y(K(g.title)+" ",1),c("span",{class:R(["type-badge",P(g.type)])},K(k(g.type)),3)]),c("div",Ht,[c("span",Yt,[a(U,null,{default:d(()=>[a(h(Vo))]),_:1}),Y(" "+K(O(g.caeated||g.createdAt)),1)]),g.isRead?G("",!0):(_(),L("span",jt,[a(U,null,{default:d(()=>[a(h(Uo))]),_:1}),t[12]||(t[12]=Y(" 未读 "))]))])]),c("div",Jt,[g.expanded?(_(),L("div",{key:1,class:"notification-full-content",innerHTML:g.content},null,8,Wt)):(_(),L("div",qt,K(j(g.content)),1)),F(g.content)?(_(),L("div",{key:2,class:"expand-toggle",onClick:Z(Te=>z(g),["stop"])},[Y(K(g.expanded?"收起":"展开全文")+" ",1),a(U,null,{default:d(()=>[g.expanded?(_(),D(h(Go),{key:1})):(_(),D(h(Ze),{key:0}))]),_:2},1024)],8,Xt)):G("",!0)])]),c("div",Zt,[c("div",Qt,[g.isRead?G("",!0):(_(),D(Pe,{key:0,content:"标记为已读"},{default:d(()=>[a(oe,{onClick:Z(Te=>A(g),["stop"]),type:"primary",size:"small",circle:""},{default:d(()=>[a(U,null,{default:d(()=>[a(h(Ne))]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)),a(Pe,{content:"收藏"},{default:d(()=>[a(oe,{onClick:Z(Te=>J(g),["stop"]),type:g.isFavorite?"warning":"default",size:"small",circle:""},{default:d(()=>[a(U,null,{default:d(()=>[a(h(Ho))]),_:1})]),_:2},1032,["onClick","type"])]),_:2},1024),a(vo,{onCommand:q,trigger:"click"},{dropdown:d(()=>[a(po,null,{default:d(()=>[a(ke,{command:`copy_${g.id}`},{default:d(()=>[a(U,null,{default:d(()=>[a(h(jo))]),_:1}),t[13]||(t[13]=Y(" 复制内容 "))]),_:2},1032,["command"]),a(ke,{command:`share_${g.id}`},{default:d(()=>[a(U,null,{default:d(()=>[a(h(Jo))]),_:1}),t[14]||(t[14]=Y(" 分享 "))]),_:2},1032,["command"]),a(ke,{command:`delete_${g.id}`,divided:""},{default:d(()=>[a(U,null,{default:d(()=>[a(h(qo))]),_:1}),t[15]||(t[15]=Y(" 删除 "))]),_:2},1032,["command"])]),_:2},1024)]),default:d(()=>[a(oe,{type:"default",size:"small",circle:""},{default:d(()=>[a(U,null,{default:d(()=>[a(h(Yo))]),_:1})]),_:1})]),_:2},1024)])])])],10,At))),128))])),[[ho,h(n)]]),h(u)>0?(_(),L("div",xt,[a(mo,{"current-page":h(r),"onUpdate:currentPage":t[3]||(t[3]=g=>fe(r)?r.value=g:null),"page-size":h(p),"onUpdate:pageSize":t[4]||(t[4]=g=>fe(p)?p.value=g:null),"page-sizes":[10,20,50,100],small:!1,disabled:h(n),background:!0,layout:"total, sizes, prev, pager, next, jumper",total:h(u),onSizeChange:X,onCurrentChange:ce},null,8,["current-page","page-size","disabled","total"])])):G("",!0)]),a(go),t[16]||(t[16]=c("div",{infos:"0"},[c("div",{class:"adBanner pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links"})],-1))])])])])}}},Ra=dn(ea,[["__scopeId","data-v-60c54055"]]);export{Ra as default};
