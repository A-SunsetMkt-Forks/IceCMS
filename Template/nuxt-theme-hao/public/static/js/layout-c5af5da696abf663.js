(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2076],{19436:(e,s,t)=>{"use strict";t.d(s,{default:()=>u});var n=t(81767),l=t(94118),a=t.n(l),i=t(98780),r=t(93031),o=t(75894),c=t.n(o);let u=function(e){let{className:s,error:t,isLoading:l,children:o}=e,{formatMessage:u,messages:d}=(0,r.ot)();return t?(0,n.jsx)(i.lZ,{variant:"error",children:u(d.error)}):l?(0,n.jsx)(i.Rh,{position:"page"}):(0,n.jsx)("div",{className:a()(c().page,s),children:o})}},23575:e=>{e.exports={notice:"UpdateNotice_notice__Eojxu",message:"UpdateNotice_message__72TJI",buttons:"UpdateNotice_buttons__es4ha"}},28088:e=>{e.exports={navbar:"NavBar_navbar__p3XJV",logo:"NavBar_logo__kza2p",links:"NavBar_links__ImLhr",selected:"NavBar_selected__nazJ6",actions:"NavBar_actions___SwCc",mobile:"NavBar_mobile__HRHHS"}},28646:(e,s,t)=>{"use strict";t.d(s,{default:()=>k});var n=t(81767),l=t(98780),a=t(42034),i=t(90655),r=t(93031),o=t(13647),c=t(17022),u=t(11686),d=t(29045),m=t(27969),h=t(38490),x=t.n(h),_=t(634);let j={current:_.V_,latest:null,hasUpdate:!1,checked:!1,releaseUrl:null},v=(0,d.vt)(()=>({...j}));async function p(){let{current:e}=v.getState(),s=await fetch("".concat(_.pf,"?v=").concat(e),{method:"GET",headers:{Accept:"application/json"}}).then(e=>e.ok?e.json():null);s&&v.setState((0,m.jM)(t=>{let{latest:n,url:l}=s,a=(0,u.Gq)(_.iC),i=!!(n&&(null==a?void 0:a.version)!==n&&x().gt(n,e));return t.current=e,t.latest=n,t.hasUpdate=i,t.checked=!0,t.releaseUrl=l,t}))}var b=t(23575),g=t.n(b),f=t(55036);let N=function(e){let{user:s,config:t}=e,{formatMessage:a,labels:d,messages:m}=(0,r.ot)(),{latest:h,checked:x,hasUpdate:j,releaseUrl:b}=v(),N=(0,i.usePathname)(),[k,A]=(0,o.useState)(x),B=(null==s?void 0:s.isAdmin)&&!(null==t?void 0:t.updatesDisabled)&&!(null==t?void 0:t.privateMode)&&!N.includes("/share/")&&!f.env.cloudMode&&!k,y=(0,o.useCallback)(()=>{(0,u.SO)(_.iC,{version:h,time:Date.now()})},[h]);return((0,o.useEffect)(()=>{B&&p()},[B]),B&&j)?(0,c.createPortal)((0,n.jsxs)("div",{className:g().notice,children:[(0,n.jsx)("div",{className:g().message,children:a(m.newVersionAvailable,{version:"v".concat(h)})}),(0,n.jsxs)("div",{className:g().buttons,children:[(0,n.jsx)(l.$n,{variant:"primary",onClick:function(){y(),A(!0),open(b||_.hn,"_blank")},children:a(d.viewDetails)}),(0,n.jsx)(l.$n,{onClick:function(){y(),A(!0)},children:a(d.dismiss)})]})]}),document.body):null},k=function(e){let{children:s}=e,{user:t,isLoading:o,error:c}=(0,r.vz)(),u=(0,r.UK)(),d=(0,i.usePathname)();return o?(0,n.jsx)(l.Rh,{}):(c&&(window.location.href="".concat("","/login")),t&&u)?(0,n.jsxs)(n.Fragment,{children:[s,(0,n.jsx)(N,{user:t,config:u}),!d.includes("/share/")&&(0,n.jsx)(a.default,{src:"".concat("","/telemetry.js")})]}):null}},37782:(e,s,t)=>{"use strict";t.d(s,{A:()=>u});var n=t(81767),l=t(88197),a=t(98780),i=t(93031),r=t(96797),o=t(55692),c=t.n(o);let u=function(){let{theme:e,saveTheme:s}=(0,i.DP)(),t=(0,l.pn)(e,{initial:{opacity:1},from:{opacity:0,transform:"translateY(".concat("light"===e?"20px":"-20px",") scale(0.5)")},enter:{opacity:1,transform:"translateY(0px) scale(1.0)"},leave:{opacity:0,transform:"translateY(".concat("light"===e?"-20px":"20px",") scale(0.5)")}});return(0,n.jsx)(a.$n,{variant:"quiet",className:c().button,onClick:function(){s("light"===e?"dark":"light")},children:t((e,s)=>(0,n.jsx)(l.CS.div,{style:e,children:(0,n.jsx)(a.In,{children:"light"===s?(0,n.jsx)(r.A.Sun,{}):(0,n.jsx)(r.A.Moon,{})})},s))})}},40663:(e,s,t)=>{Promise.resolve().then(t.bind(t,28646)),Promise.resolve().then(t.t.bind(t,94080,23)),Promise.resolve().then(t.bind(t,90881)),Promise.resolve().then(t.bind(t,19436))},42421:(e,s,t)=>{"use strict";t.d(s,{A:()=>m});var n=t(81767),l=t(98780),a=t(94118),i=t.n(a),r=t(66421),o=t(93031),c=t(96797),u=t(68157),d=t.n(u);let m=function(){let{locale:e,saveLocale:s,dir:t}=(0,o.Ym)(),a=Object.keys(r.eo).map(e=>({...r.eo[e],value:e}));return(0,n.jsxs)(l.J1,{children:[(0,n.jsx)(l.$n,{variant:"quiet",children:(0,n.jsx)(l.In,{children:(0,n.jsx)(c.A.Globe,{})})}),(0,n.jsx)(l.zD,{position:"bottom",alignment:"rtl"===t?"start":"end",children:t=>(0,n.jsx)("div",{className:d().menu,children:a.map(a=>{let{value:r,label:o}=a;return(0,n.jsxs)("div",{className:i()(d().item,{[d().selected]:r===e}),onClick:e=>{e.stopPropagation(),s(r),t()},children:[(0,n.jsx)("span",{lang:r,children:o}),r===e&&(0,n.jsx)(l.In,{className:d().icon,children:(0,n.jsx)(c.A.Check,{})})]},r)})})})]})}},55692:e=>{e.exports={button:"ThemeButton_button__iXDNp"}},61597:e=>{e.exports={menu:"MobileMenu_menu__DO6aZ",items:"MobileMenu_items__N_NHj",item:"MobileMenu_item__iN83G",selected:"MobileMenu_selected__Z1kQJ",submenu:"MobileMenu_submenu__eW8zr"}},63935:e=>{e.exports={button:"TeamsButton_button__RsDvE",menu:"TeamsButton_menu__kxPQO",heading:"TeamsButton_heading__NnYKE",selected:"TeamsButton_selected__3ARm8"}},68157:e=>{e.exports={menu:"LanguageButton_menu__fHGbq",item:"LanguageButton_item__XjDe5",selected:"LanguageButton_selected__o_JK5",icon:"LanguageButton_icon__Q_enS"}},75894:e=>{e.exports={page:"Page_page__xxbhi"}},90881:(e,s,t)=>{"use strict";t.d(s,{default:()=>M});var n=t(81767),l=t(13647),a=t(98780),i=t(4970),r=t.n(i),o=t(94118),c=t.n(o),u=t(17022),d=t(90655),m=t(61597),h=t.n(m);let x=function(e){let{items:s=[],onClose:t}=e,l=(0,d.usePathname)(),a=e=>{let{items:s,className:i}=e;return(0,n.jsx)("div",{className:c()(h().items,i),children:s.map(e=>{let{label:s,url:i,children:o}=e,u=l.startsWith(i);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r(),{href:i,className:c()(h().item,{[h().selected]:u}),onClick:t,children:s},i),o&&(0,n.jsx)(a,{items:o,className:h().submenu})]})})})};return(0,u.createPortal)((0,n.jsx)("div",{className:c()(h().menu),children:(0,n.jsx)(a,{items:s})}),document.body)},_=function(e){let{menuItems:s}=e,[t,i]=(0,l.useState)(!1);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.$n,{variant:"quiet",onClick:()=>i(e=>!e),children:(0,n.jsx)(a.In,{children:t?(0,n.jsx)(a.FI.Close,{}):(0,n.jsx)(a.FI.Menu,{})})}),t&&(0,n.jsx)(x,{items:s,onClose:()=>i(!1)})]})};var j=t(37782),v=t(42421),p=t(96797),b=t(93031),g=t(634),f=t(92732),N=t.n(f),k=t(55036);let A=function(){let{formatMessage:e,labels:s}=(0,b.ot)(),{user:t}=(0,b.vz)(),l=(0,d.useRouter)(),{dir:i}=(0,b.Ym)(),r=!!k.env.cloudMode,o=(e,s)=>{"profile"===e&&l.push("/profile"),"logout"===e&&l.push("/logout"),s()};return(0,n.jsxs)(a.J1,{children:[(0,n.jsx)(a.$n,{"data-test":"button-profile",variant:"quiet",children:(0,n.jsx)(a.In,{children:(0,n.jsx)(p.A.Profile,{})})}),(0,n.jsx)(a.zD,{position:"bottom",alignment:"rtl"===i?"start":"end",children:l=>(0,n.jsxs)(a.W1,{onSelect:e=>o(e,l),className:N().menu,children:[(0,n.jsx)(a.EY,{className:N().name,children:t.username}),(0,n.jsxs)(a.q7,{className:N().item,divider:!0,children:[(0,n.jsx)(a.In,{children:(0,n.jsx)(p.A.User,{})}),(0,n.jsx)(a.EY,{children:e(s.profile)})]},"profile"),!r&&(0,n.jsxs)(a.q7,{"data-test":"item-logout",className:N().item,children:[(0,n.jsx)(a.In,{children:(0,n.jsx)(p.A.Logout,{})}),(0,n.jsx)(a.EY,{children:e(s.logout)})]},"logout"),(0,n.jsx)("div",{className:N().version,children:"v".concat(g.V_)})]})})]})};var B=t(63935),y=t.n(B);let C=function(e){var s;let{className:t,showText:l=!0,onChange:i}=e,{user:r}=(0,b.vz)(),{formatMessage:o,labels:u}=(0,b.ot)(),{result:d}=(0,b.S3)(r.id),{teamId:m}=(0,b.c0)(),h=null==d||null==(s=d.data)?void 0:s.find(e=>{let{id:s}=e;return s===m}),x=(e,s)=>{null==i||i(s!==r.id?s:""),e()};return(null==d?void 0:d.count)?(0,n.jsxs)(a.J1,{children:[(0,n.jsxs)(a.$n,{className:c()(y().button,t),variant:"quiet",children:[(0,n.jsx)(a.In,{children:m?(0,n.jsx)(p.A.Users,{}):(0,n.jsx)(p.A.User,{})}),l&&(0,n.jsx)(a.EY,{children:m?null==h?void 0:h.name:r.username}),(0,n.jsx)(a.In,{children:(0,n.jsx)(p.A.ChevronDown,{})})]}),(0,n.jsx)(a.zD,{alignment:"end",children:e=>{var s;return(0,n.jsxs)(a.W1,{className:y().menu,variant:"popup",onSelect:x.bind(null,e),children:[(0,n.jsx)("div",{className:y().heading,children:o(u.myAccount)}),(0,n.jsx)(a.q7,{className:c()({[y().selected]:!m}),children:(0,n.jsxs)(a.LS,{gap:10,alignItems:"center",children:[(0,n.jsx)(a.In,{children:(0,n.jsx)(p.A.User,{})}),(0,n.jsx)(a.EY,{children:r.username})]})},r.id),(0,n.jsx)("div",{className:y().heading,children:o(u.team)}),null==d||null==(s=d.data)?void 0:s.map(e=>{let{id:s,name:t}=e;return(0,n.jsx)(a.q7,{className:c()({[y().selected]:s===m}),children:(0,n.jsxs)(a.LS,{gap:10,alignItems:"center",children:[(0,n.jsx)(a.In,{children:(0,n.jsx)(p.A.Users,{})}),(0,n.jsx)(a.EY,{children:t})]})},s)})]})}})]}):null};var I=t(11686),P=t(28088),w=t.n(P),E=t(55036);let M=function(){let{formatMessage:e,labels:s}=(0,b.ot)(),{pathname:t,router:i}=(0,b.cq)(),{teamId:o,renderTeamUrl:u}=(0,b.c0)(),d=!!E.env.cloudMode,m=[{label:e(s.dashboard),url:u("/dashboard")},{label:e(s.websites),url:u("/websites")},{label:e(s.reports),url:u("/reports")},{label:e(s.settings),url:u("/settings")}].filter(e=>e),h=[{label:e(s.dashboard),url:u("/dashboard")},!d&&{label:e(s.settings),url:u("/settings"),children:[...o?[{label:e(s.team),url:u("/settings/team")}]:[],{label:e(s.websites),url:u("/settings/websites")},...o?[{label:e(s.members),url:u("/settings/members")}]:[{label:e(s.teams),url:u("/settings/teams")},{label:e(s.users),url:"/settings/users"}]]},{label:e(s.profile),url:"/profile"},!d&&{label:e(s.logout),url:"/logout"}].filter(e=>e),x=e=>{let s=e?"/teams/".concat(e):"/";d||(0,I.SO)("umami.team",{id:e}),i.push(d?"".concat(E.env.cloudUrl).concat(s):s)};return(0,l.useEffect)(()=>{if(!d){var e;let s=null==(e=(0,I.Gq)("umami.team"))?void 0:e.id;s&&s!==o&&i.push("/"!==t&&"/dashboard"!==t?"/":"/teams/".concat(s,"/dashboard"))}},[d]),(0,n.jsxs)("div",{className:w().navbar,children:[(0,n.jsxs)("div",{className:w().logo,children:[(0,n.jsx)(a.In,{size:"lg",children:(0,n.jsx)(p.A.Logo,{})}),(0,n.jsx)(a.EY,{children:"umami"})]}),(0,n.jsx)("div",{className:w().links,children:m.map(e=>{let{url:s,label:l}=e;return(0,n.jsx)(r(),{href:s,className:c()({[w().selected]:t.startsWith(s)}),prefetch:"/settings"!==s,children:(0,n.jsx)(a.EY,{children:l})},s)})}),(0,n.jsxs)("div",{className:w().actions,children:[(0,n.jsx)(C,{onChange:x}),(0,n.jsx)(j.A,{}),(0,n.jsx)(v.A,{}),(0,n.jsx)(A,{})]}),(0,n.jsxs)("div",{className:w().mobile,children:[(0,n.jsx)(C,{onChange:x,showText:!1}),(0,n.jsx)(_,{menuItems:h})]})]})}},92732:e=>{e.exports={menu:"ProfileButton_menu__NQdVL",item:"ProfileButton_item__FBiu1",version:"ProfileButton_version__hywBG",name:"ProfileButton_name__Z31ih"}},94080:e=>{e.exports={layout:"layout_layout__xesVA",nav:"layout_nav__g9Wep",body:"layout_body__pGwWC"}}},e=>{var s=s=>e(e.s=s);e.O(0,[8860,4011,3698,9541,279,8197,2881,3031,6797,6721,3664,7358],()=>s(40663)),_N_E=e.O()}]);